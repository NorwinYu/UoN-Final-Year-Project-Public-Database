<div class="file js-file js-details-container Details Details--on open show-inline-notes " id="diff-0">
<div class="file-header file-header--expandable js-file-header " data-anchor="diff-6f1c01c87b9f72778a79bb3c71ac529f" data-file-deleted="false" data-file-type=".java" data-path="pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java" data-short-path="6f1c01c">
<div class="file-actions">
<span class="show-file-notes pt-1">
<label>
<input checked="checked" class="js-toggle-file-notes" type="checkbox"/>
            Show comments
          </label>
</span>
<div class="BtnGroup">
<clipboard-copy class="btn btn-sm BtnGroup-item" value="pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java">
                Copy path
              </clipboard-copy>
<a class="btn btn-sm BtnGroup-item" href="/aahmed-se/incubator-pulsar/blob/647925440140c8184e865956eb1147deb2f9d4b6/pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java" rel="nofollow">
              View file
            </a>
</div>
<button aria-expanded="true" aria-label="Toggle diff contents" class="btn-octicon p-1 pr-2 js-details-target tooltipped tooltipped-w" type="button">
<svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z" fill-rule="evenodd"></path></svg>
<svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z" fill-rule="evenodd"></path></svg>
</button>
</div>
<div class="file-info">
<span aria-label="7 additions &amp; 8 deletions" class="diffstat tooltipped tooltipped-e">15 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>
<a class="link-gray-dark" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java">pulsar-broker/src/main/java/org/apache/pulsar/broker/PulsarService.java</a>
</div>
</div>
<div class="js-file-content Details-content--hidden">
<div class="data highlight js-blob-wrapper " style="overflow-x: auto">
<table class="diff-table js-diff-table tab-size " data-diff-anchor="diff-6f1c01c87b9f72778a79bb3c71ac529f" data-tab-size="8">
<tr class="js-expandable-line" data-position="0">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Up" class="js-expand directional-expander single-expander" data-left-range="1-48" data-right-range="1-48" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=49&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=49&amp;right_hunk_size=6" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -49,7 +49,6 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR49"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.conf.ClientConfiguration</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR50"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.LedgerOffloader</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL51"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR51"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.LedgerOffloaderFactory</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="52" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL52"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.ManagedLedgerConfig</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="53" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL53"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="52" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR52"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.ManagedLedgerFactory</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="54" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL54"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="53" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR53"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.impl.NullLedgerOffloader</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="55" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL55"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="54" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR54"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.mledger.offload.OffloaderUtils</span>;</span></td>
</tr>
<tr class="js-expandable-line" data-position="8">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="56-88" data-right-range="55-87" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=55&amp;last_right=54&amp;left=123&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=122&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="89-122" data-right-range="88-121" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=55&amp;last_right=54&amp;left=123&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=122&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -123,7 +122,7 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="123" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL123"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="122" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR122"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">PulsarService</span> <span class="pl-k">implements</span> <span class="pl-e">AutoCloseable</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="124" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL124"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="123" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR123"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOG</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">PulsarService</span><span class="pl-k">.</span>class);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="125" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL125"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="124" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR124"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">ServiceConfiguration</span> config <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="126" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL126"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">NamespaceService</span> <span class="x x-first x-last">nsservice</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="125" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR125"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">NamespaceService</span> <span class="x x-first x-last">nsService</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL127"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="126" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR126"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">ManagedLedgerClientFactory</span> managedLedgerClientFactory <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR127"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">LeaderElectionService</span> leaderElectionService <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL129"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR128"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">BrokerService</span> brokerService <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr class="js-expandable-line" data-position="17">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="130-196" data-right-range="129-195" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=129&amp;last_right=128&amp;left=265&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=264&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="197-264" data-right-range="196-263" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=129&amp;last_right=128&amp;left=265&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=264&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -265,7 +264,7 @@ public void close() throws PulsarServerException {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="265" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL265"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="264" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR264"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                client <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="266" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL266"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="265" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR265"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="267" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL267"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="266" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR266"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="268" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL268"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="x x-first x-last">nsservice</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="267" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR267"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="x x-first x-last">nsService</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="269" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL269"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="268" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR268"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="270" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL270"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="269" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR269"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">if</span> (compactorExecutor <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="271" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL271"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="270" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR270"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                compactorExecutor<span class="pl-k">.</span>shutdown();</span></td>
</tr>
<tr class="js-expandable-line" data-position="26">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="272-345" data-right-range="271-344" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=271&amp;last_right=270&amp;left=421&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=420&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="346-420" data-right-range="345-419" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=271&amp;last_right=270&amp;left=421&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=420&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -421,7 +420,7 @@ public Boolean get() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="421" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL421"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="420" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR420"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>webService<span class="pl-k">.</span>addStaticResources(<span class="pl-s"><span class="pl-pds">"</span>/static<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>/static<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="422" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL422"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="421" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR421"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="423" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL423"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="422" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR422"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> Register heartbeat and bootstrap namespaces.</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="424" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL424"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsservice</span><span class="pl-k">.</span>registerBootstrapNamespaces();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="423" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR423"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsService</span><span class="pl-k">.</span>registerBootstrapNamespaces();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="425" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL425"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="424" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR424"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="426" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL426"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="425" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR425"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            schemaRegistryService <span class="pl-k">=</span> <span class="pl-smi">SchemaRegistryService</span><span class="pl-k">.</span>create(<span class="pl-c1">this</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="427" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL427"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="426" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR426"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr class="js-expandable-line" data-position="35">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="428-461" data-right-range="427-460" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=427&amp;last_right=426&amp;left=498&amp;left_hunk_size=14&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=497&amp;right_hunk_size=14" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="462-497" data-right-range="461-496" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=427&amp;last_right=426&amp;left=498&amp;left_hunk_size=14&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=497&amp;right_hunk_size=14" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -498,14 +497,14 @@ private void acquireSLANamespace() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="498" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL498"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="497" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR497"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="499" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL499"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="498" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR498"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">boolean</span> acquiredSLANamespace;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="500" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL500"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="499" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR499"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">try</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="501" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL501"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner">                acquiredSLANamespace <span class="pl-k">=</span> <span class="x x-first x-last">nsservice</span><span class="pl-k">.</span>registerSLANamespace();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="500" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR500"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">                acquiredSLANamespace <span class="pl-k">=</span> <span class="x x-first x-last">nsService</span><span class="pl-k">.</span>registerSLANamespace();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="502" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL502"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="501" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR501"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">LOG</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Register SLA Namespace = {}, returned - {}.<span class="pl-pds">"</span></span>, nsName, acquiredSLANamespace);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="503" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL503"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="502" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR502"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            } <span class="pl-k">catch</span> (<span class="pl-smi">PulsarServerException</span> e) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="504" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL504"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="503" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR503"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                acquiredSLANamespace <span class="pl-k">=</span> <span class="pl-c1">false</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="505" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL505"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="504" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR504"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="506" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL506"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="505" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR505"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="507" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL507"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="506" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR506"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">if</span> (<span class="pl-k">!</span>acquiredSLANamespace) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="508" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL508"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsservice</span><span class="pl-k">.</span>unloadSLANamespace();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="507" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR507"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsService</span><span class="pl-k">.</span>unloadSLANamespace();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="509" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL509"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="508" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR508"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="510" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL510"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="509" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR509"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="511" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL511"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="510" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR510"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">LOG</span><span class="pl-k">.</span>warn(</span></td>
</tr>
<tr class="js-expandable-line" data-position="52">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="512-533" data-right-range="511-532" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=511&amp;last_right=510&amp;left=557&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=556&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="534-556" data-right-range="533-555" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=511&amp;last_right=510&amp;left=557&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=556&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -557,7 +556,7 @@ private void startNamespaceService() throws PulsarServerException {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="557" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL557"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="556" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR556"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="558" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL558"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="557" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR557"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">LOG</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Starting name space service, bootstrap namespaces=<span class="pl-pds">"</span></span> <span class="pl-k">+</span> config<span class="pl-k">.</span>getBootstrapNamespaces());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="559" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL559"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="558" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR558"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="560" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL560"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsservice</span> <span class="pl-k">=</span> getNamespaceServiceProvider()<span class="pl-k">.</span>get();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="559" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR559"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsService</span> <span class="pl-k">=</span> getNamespaceServiceProvider()<span class="pl-k">.</span>get();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="561" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL561"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="560" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR560"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">    }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="562" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL562"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="561" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR561"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="563" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL563"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="562" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR562"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">Supplier&lt;<span class="pl-smi">NamespaceService</span>&gt;</span> <span class="pl-en">getNamespaceServiceProvider</span>() <span class="pl-k">throws</span> <span class="pl-smi">PulsarServerException</span> {</span></td>
</tr>
<tr class="js-expandable-line" data-position="61">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="564-610" data-right-range="563-609" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=563&amp;last_right=562&amp;left=660&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=659&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="611-659" data-right-range="610-658" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=563&amp;last_right=562&amp;left=660&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=659&amp;right_hunk_size=7" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -660,7 +659,7 @@ public LeaderElectionService getLeaderElectionService() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="660" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL660"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="659" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR659"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c">     * <span class="pl-k">@return</span> a reference of the current namespace service instance.</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="661" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL661"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="660" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR660"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c"> <span class="pl-c">*/</span></span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="662" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL662"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="661" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR661"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-smi">NamespaceService</span> <span class="pl-en">getNamespaceService</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="663" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL663"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">return</span> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsservice</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="662" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR662"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">return</span> <span class="pl-c1">this</span><span class="pl-k">.</span><span class="x x-first x-last">nsService</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="664" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL664"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="663" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR663"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">    }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="665" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL665"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="664" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR664"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="666" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL666"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="665" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR665"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-smi">WorkerService</span> <span class="pl-en">getWorkerService</span>() {</span></td>
</tr>
<tr class="js-expandable-line" data-position="">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander single-expander" data-left-range="667-1046" data-right-range="666-1046" data-url="/apache/pulsar/blob_excerpt/54d8092c58c0be236e6be793364c7dd48df9f3b4?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=666&amp;last_right=665&amp;left=1047&amp;left_hunk_size=&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2FPulsarService.java&amp;right=1047&amp;right_hunk_size=" href="#diff-6f1c01c87b9f72778a79bb3c71ac529f" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2"></td>
</tr>
</table>
</div>
</div>
</div>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL51"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR51"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="52" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL52"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="53" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL53"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="52" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR52"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="54" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL54"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="53" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR53"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="55" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL55"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="54" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR54"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="123" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL123"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="122" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR122"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="124" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL124"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="123" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR123"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="125" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL125"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="124" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR124"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="126" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL126"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="125" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR125"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL127"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="126" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR126"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR127"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL129"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="265" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL265"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="264" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR264"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="266" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL266"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="265" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR265"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="267" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL267"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="266" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR266"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="268" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL268"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="267" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR267"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="269" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL269"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="268" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR268"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="270" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL270"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="269" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR269"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="271" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL271"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="270" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR270"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="421" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL421"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="420" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR420"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="422" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL422"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="421" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR421"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="423" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL423"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="422" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR422"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="424" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL424"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="423" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR423"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="425" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL425"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="424" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR424"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="426" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL426"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="425" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR425"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="427" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL427"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="426" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR426"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="498" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL498"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="497" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR497"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="499" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL499"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="498" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR498"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="500" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL500"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="499" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR499"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="501" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL501"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="500" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR500"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="502" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL502"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="501" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR501"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="503" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL503"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="502" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR502"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="504" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL504"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="503" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR503"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="505" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL505"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="504" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR504"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="506" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL506"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="505" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR505"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="507" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL507"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="506" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR506"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="508" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL508"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="507" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR507"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="509" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL509"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="508" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR508"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="510" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL510"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="509" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR509"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="511" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL511"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="510" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR510"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="557" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL557"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="556" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR556"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="558" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL558"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="557" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR557"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="559" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL559"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="558" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR558"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="560" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL560"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="559" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR559"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="561" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL561"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="560" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR560"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="562" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL562"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="561" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR561"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="563" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL563"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="562" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR562"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="660" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL660"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="659" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR659"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="661" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL661"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="660" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR660"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="662" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL662"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="661" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR661"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="663" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL663"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="662" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR662"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="664" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL664"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="663" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR663"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="665" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL665"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="664" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR664"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="666" id="diff-6f1c01c87b9f72778a79bb3c71ac529fL666"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="665" id="diff-6f1c01c87b9f72778a79bb3c71ac529fR665"></td>
<div class="file js-file js-details-container Details Details--on open show-inline-notes " id="diff-1">
<div class="file-header file-header--expandable js-file-header " data-anchor="diff-2bab5afb79d1841424610a99874c2da7" data-file-deleted="false" data-file-type=".java" data-path="pulsar-broker/src/test/java/org/apache/pulsar/broker/auth/MockedPulsarServiceBaseTest.java" data-short-path="2bab5af">
<div class="file-actions">
<span class="show-file-notes pt-1">
<label>
<input checked="checked" class="js-toggle-file-notes" type="checkbox"/>
            Show comments
          </label>
</span>
<div class="BtnGroup">
<clipboard-copy class="btn btn-sm BtnGroup-item" value="pulsar-broker/src/test/java/org/apache/pulsar/broker/auth/MockedPulsarServiceBaseTest.java">
                Copy path
              </clipboard-copy>
<a class="btn btn-sm BtnGroup-item" href="/aahmed-se/incubator-pulsar/blob/647925440140c8184e865956eb1147deb2f9d4b6/pulsar-broker/src/test/java/org/apache/pulsar/broker/auth/MockedPulsarServiceBaseTest.java" rel="nofollow">
              View file
            </a>
</div>
<button aria-expanded="true" aria-label="Toggle diff contents" class="btn-octicon p-1 pr-2 js-details-target tooltipped tooltipped-w" type="button">
<svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z" fill-rule="evenodd"></path></svg>
<svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z" fill-rule="evenodd"></path></svg>
</button>
</div>
<div class="file-info">
<span aria-label="7 additions &amp; 9 deletions" class="diffstat tooltipped tooltipped-e">16 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>
<a class="link-gray-dark" href="#diff-2bab5afb79d1841424610a99874c2da7" title="pulsar-broker/src/test/java/org/apache/pulsar/broker/auth/MockedPulsarServiceBaseTest.java">pulsar-broker/src/test/java/org/apache/pulsar/broker/auth/MockedPulsarServiceBaseTest.java</a>
</div>
</div>
<div class="js-file-content Details-content--hidden">
<div class="data highlight js-blob-wrapper " style="overflow-x: auto">
<table class="diff-table js-diff-table tab-size " data-diff-anchor="diff-2bab5afb79d1841424610a99874c2da7" data-tab-size="8">
<tr class="js-expandable-line" data-position="0">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Up" class="js-expand directional-expander single-expander" data-left-range="1-36" data-right-range="1-36" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=37&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=37&amp;right_hunk_size=6" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -37,7 +37,6 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="37" id="diff-2bab5afb79d1841424610a99874c2da7L37"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="37" id="diff-2bab5afb79d1841424610a99874c2da7R37"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.function.Predicate</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="38" id="diff-2bab5afb79d1841424610a99874c2da7L38"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="38" id="diff-2bab5afb79d1841424610a99874c2da7R38"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.function.Supplier</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="39" id="diff-2bab5afb79d1841424610a99874c2da7L39"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="39" id="diff-2bab5afb79d1841424610a99874c2da7R39"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-2bab5afb79d1841424610a99874c2da7L40"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.client.BKException</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="41" id="diff-2bab5afb79d1841424610a99874c2da7L41"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="40" id="diff-2bab5afb79d1841424610a99874c2da7R40"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.client.BookKeeper</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="42" id="diff-2bab5afb79d1841424610a99874c2da7L42"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="41" id="diff-2bab5afb79d1841424610a99874c2da7R41"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.client.PulsarMockBookKeeper</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="43" id="diff-2bab5afb79d1841424610a99874c2da7L43"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="42" id="diff-2bab5afb79d1841424610a99874c2da7R42"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.test.PortManager</span>;</span></td>
</tr>
<tr class="js-expandable-line" data-position="8">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="44-67" data-right-range="43-66" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=43&amp;last_right=42&amp;left=93&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=92&amp;right_hunk_size=6" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="68-92" data-right-range="67-91" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=43&amp;last_right=42&amp;left=93&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=92&amp;right_hunk_size=6" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -93,7 +92,6 @@ public MockedPulsarServiceBaseTest() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-2bab5afb79d1841424610a99874c2da7L93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="92" id="diff-2bab5afb79d1841424610a99874c2da7R92"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">resetConfig</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-2bab5afb79d1841424610a99874c2da7L94"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-2bab5afb79d1841424610a99874c2da7R93"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ServiceConfiguration</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-2bab5afb79d1841424610a99874c2da7L95"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-2bab5afb79d1841424610a99874c2da7R94"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf<span class="pl-k">.</span>setBrokerServicePort(<span class="pl-c1">BROKER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="96" id="diff-2bab5afb79d1841424610a99874c2da7L96"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf<span class="pl-k">.</span>setAdvertisedAddress(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="97" id="diff-2bab5afb79d1841424610a99874c2da7L97"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-2bab5afb79d1841424610a99874c2da7R95"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf<span class="pl-k">.</span>setWebServicePort(<span class="pl-c1">BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="98" id="diff-2bab5afb79d1841424610a99874c2da7L98"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="96" id="diff-2bab5afb79d1841424610a99874c2da7R96"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf<span class="pl-k">.</span>setClusterName(configClusterName);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="99" id="diff-2bab5afb79d1841424610a99874c2da7L99"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="97" id="diff-2bab5afb79d1841424610a99874c2da7R97"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">this</span><span class="pl-k">.</span>conf<span class="pl-k">.</span>setAdvertisedAddress(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>); <span class="pl-c"><span class="pl-c">//</span> there are TLS tests in here, they need to use localhost because of the certificate</span></span></td>
</tr>
<tr class="js-expandable-line" data-position="16">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="100-127" data-right-range="98-125" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=99&amp;last_right=97&amp;left=158&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=156&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="128-157" data-right-range="126-155" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=99&amp;last_right=97&amp;left=158&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=156&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -158,7 +156,7 @@ protected final void internalCleanup() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-2bab5afb79d1841424610a99874c2da7L158"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-2bab5afb79d1841424610a99874c2da7R156"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                pulsar<span class="pl-k">.</span>close();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-2bab5afb79d1841424610a99874c2da7L159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="157" id="diff-2bab5afb79d1841424610a99874c2da7R157"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-2bab5afb79d1841424610a99874c2da7L160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-2bab5afb79d1841424610a99874c2da7R158"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">if</span> (mockBookKeeper <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="161" id="diff-2bab5afb79d1841424610a99874c2da7L161"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner">                mockBookKeeper<span class="pl-k">.</span><span class="x x-first x-last">reallyShutdow</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="159" id="diff-2bab5afb79d1841424610a99874c2da7R159"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">                mockBookKeeper<span class="pl-k">.</span><span class="x x-first x-last">reallyShutdown</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-2bab5afb79d1841424610a99874c2da7L162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-2bab5afb79d1841424610a99874c2da7R160"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="163" id="diff-2bab5afb79d1841424610a99874c2da7L163"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-2bab5afb79d1841424610a99874c2da7R161"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">if</span> (mockZookKeeper <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-2bab5afb79d1841424610a99874c2da7L164"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-2bab5afb79d1841424610a99874c2da7R162"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                mockZookKeeper<span class="pl-k">.</span>shutdown();</span></td>
</tr>
<tr class="js-expandable-line" data-position="25">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="165-174" data-right-range="163-172" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=164&amp;last_right=162&amp;left=187&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=185&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="175-186" data-right-range="173-184" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=164&amp;last_right=162&amp;left=187&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=185&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -187,7 +185,7 @@ protected void restartBroker() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="187" id="diff-2bab5afb79d1841424610a99874c2da7L187"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="185" id="diff-2bab5afb79d1841424610a99874c2da7R185"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">stopBroker</span>() <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="188" id="diff-2bab5afb79d1841424610a99874c2da7L188"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="186" id="diff-2bab5afb79d1841424610a99874c2da7R186"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar<span class="pl-k">.</span>close();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="189" id="diff-2bab5afb79d1841424610a99874c2da7L189"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="187" id="diff-2bab5afb79d1841424610a99874c2da7R187"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> Simulate cleanup of ephemeral nodes</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="190" id="diff-2bab5afb79d1841424610a99874c2da7L190"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span><span class="x x-first x-last">mockZookKeeper</span>.delete("/loadbalance/brokers/localhost:" + pulsar.getConfiguration().getWebServicePort(), -1);</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="188" id="diff-2bab5afb79d1841424610a99874c2da7R188"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span><span class="x x-first x-last">mockZooKeeper</span>.delete("/loadbalance/brokers/localhost:" + pulsar.getConfiguration().getWebServicePort(), -1);</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="191" id="diff-2bab5afb79d1841424610a99874c2da7L191"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="189" id="diff-2bab5afb79d1841424610a99874c2da7R189"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">    }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="192" id="diff-2bab5afb79d1841424610a99874c2da7L192"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="190" id="diff-2bab5afb79d1841424610a99874c2da7R190"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="193" id="diff-2bab5afb79d1841424610a99874c2da7L193"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="191" id="diff-2bab5afb79d1841424610a99874c2da7R191"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">startBroker</span>() <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {</span></td>
</tr>
<tr class="js-expandable-line" data-position="34">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="194-195" data-right-range="192-193" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;in_wiki_context=&amp;last_left=193&amp;last_right=191&amp;left=199&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=197&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -199,7 +197,7 @@ protected PulsarService startBroker(ServiceConfiguration conf) throws Exception</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="199" id="diff-2bab5afb79d1841424610a99874c2da7L199"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="197" id="diff-2bab5afb79d1841424610a99874c2da7R197"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="200" id="diff-2bab5afb79d1841424610a99874c2da7L200"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="198" id="diff-2bab5afb79d1841424610a99874c2da7R198"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        setupBrokerMocks(pulsar);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="201" id="diff-2bab5afb79d1841424610a99874c2da7L201"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="199" id="diff-2bab5afb79d1841424610a99874c2da7R199"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">boolean</span> isAuthorizationEnabled <span class="pl-k">=</span> conf<span class="pl-k">.</span>isAuthorizationEnabled();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="202" id="diff-2bab5afb79d1841424610a99874c2da7L202"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> enable <span class="x x-first x-last">authrorization</span> to initialize authorization service which is used by grant-permission</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="200" id="diff-2bab5afb79d1841424610a99874c2da7R200"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> enable <span class="x x-first x-last">authorization</span> to initialize authorization service which is used by grant-permission</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="203" id="diff-2bab5afb79d1841424610a99874c2da7L203"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="201" id="diff-2bab5afb79d1841424610a99874c2da7R201"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        conf<span class="pl-k">.</span>setAuthorizationEnabled(<span class="pl-c1">true</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="204" id="diff-2bab5afb79d1841424610a99874c2da7L204"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="202" id="diff-2bab5afb79d1841424610a99874c2da7R202"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar<span class="pl-k">.</span>start();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="205" id="diff-2bab5afb79d1841424610a99874c2da7L205"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="203" id="diff-2bab5afb79d1841424610a99874c2da7R203"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        conf<span class="pl-k">.</span>setAuthorizationEnabled(isAuthorizationEnabled);</span></td>
</tr>
<tr class="js-expandable-line" data-position="43">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="206-213" data-right-range="204-211" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;in_wiki_context=&amp;last_left=205&amp;last_right=203&amp;left=223&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=221&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -223,7 +221,7 @@ protected void setupBrokerMocks(PulsarService pulsar) throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="223" id="diff-2bab5afb79d1841424610a99874c2da7L223"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="221" id="diff-2bab5afb79d1841424610a99874c2da7R221"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="224" id="diff-2bab5afb79d1841424610a99874c2da7L224"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="222" id="diff-2bab5afb79d1841424610a99874c2da7R222"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">MockZooKeeper</span> <span class="pl-en">createMockZooKeeper</span>() <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="225" id="diff-2bab5afb79d1841424610a99874c2da7L225"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="223" id="diff-2bab5afb79d1841424610a99874c2da7R223"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">MockZooKeeper</span> zk <span class="pl-k">=</span> <span class="pl-smi">MockZooKeeper</span><span class="pl-k">.</span>newInstance(<span class="pl-smi">MoreExecutors</span><span class="pl-k">.</span>newDirectExecutorService());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="226" id="diff-2bab5afb79d1841424610a99874c2da7L226"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">List&lt;<span class="pl-smi">ACL</span>&gt;</span> dummyAclList <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;<span class="pl-smi x x-first x-last">ACL</span>&gt;</span>(<span class="pl-c1">0</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="224" id="diff-2bab5afb79d1841424610a99874c2da7R224"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">List&lt;<span class="pl-smi">ACL</span>&gt;</span> dummyAclList <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;&gt;</span>(<span class="pl-c1">0</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="227" id="diff-2bab5afb79d1841424610a99874c2da7L227"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="225" id="diff-2bab5afb79d1841424610a99874c2da7R225"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="228" id="diff-2bab5afb79d1841424610a99874c2da7L228"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="226" id="diff-2bab5afb79d1841424610a99874c2da7R226"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">ZkUtils</span><span class="pl-k">.</span>createFullPathOptimistic(zk, <span class="pl-s"><span class="pl-pds">"</span>/ledgers/available/192.168.1.1:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">5000</span>,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="229" id="diff-2bab5afb79d1841424610a99874c2da7L229"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="227" id="diff-2bab5afb79d1841424610a99874c2da7R227"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(<span class="pl-smi">ZookeeperClientFactoryImpl</span><span class="pl-c1"><span class="pl-k">.</span>ENCODING_SCHEME</span>), dummyAclList, <span class="pl-smi">CreateMode</span><span class="pl-c1"><span class="pl-k">.</span>PERSISTENT</span>);</span></td>
</tr>
<tr class="js-expandable-line" data-position="52">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="230-236" data-right-range="228-234" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;in_wiki_context=&amp;last_left=229&amp;last_right=227&amp;left=246&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=244&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -246,7 +244,7 @@ public NonClosableMockBookKeeper(ZooKeeper zk, ExecutorService executor) throws</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="246" id="diff-2bab5afb79d1841424610a99874c2da7L246"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="244" id="diff-2bab5afb79d1841424610a99874c2da7R244"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="247" id="diff-2bab5afb79d1841424610a99874c2da7L247"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="245" id="diff-2bab5afb79d1841424610a99874c2da7R245"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="248" id="diff-2bab5afb79d1841424610a99874c2da7L248"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="246" id="diff-2bab5afb79d1841424610a99874c2da7R246"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">@Override</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="249" id="diff-2bab5afb79d1841424610a99874c2da7L249"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">close</span>() <span class="pl-k x x-first">throws</span><span class="x"> </span><span class="pl-smi x">InterruptedException</span><span class="x">, </span><span class="pl-smi x">BKException</span><span class="x x-last"> </span>{</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="247" id="diff-2bab5afb79d1841424610a99874c2da7R247"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">close</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="250" id="diff-2bab5afb79d1841424610a99874c2da7L250"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="248" id="diff-2bab5afb79d1841424610a99874c2da7R248"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> no-op</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="251" id="diff-2bab5afb79d1841424610a99874c2da7L251"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="249" id="diff-2bab5afb79d1841424610a99874c2da7R249"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="252" id="diff-2bab5afb79d1841424610a99874c2da7L252"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="250" id="diff-2bab5afb79d1841424610a99874c2da7R250"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr class="js-expandable-line" data-position="61">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="253-252" data-right-range="251-250" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;in_wiki_context=&amp;last_left=252&amp;last_right=250&amp;left=255&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=253&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -255,7 +253,7 @@ public void shutdown() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="255" id="diff-2bab5afb79d1841424610a99874c2da7L255"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="253" id="diff-2bab5afb79d1841424610a99874c2da7R253"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> no-op</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="256" id="diff-2bab5afb79d1841424610a99874c2da7L256"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="254" id="diff-2bab5afb79d1841424610a99874c2da7R254"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="257" id="diff-2bab5afb79d1841424610a99874c2da7L257"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="255" id="diff-2bab5afb79d1841424610a99874c2da7R255"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="258" id="diff-2bab5afb79d1841424610a99874c2da7L258"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en x x-first x-last">reallyShutdow</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="256" id="diff-2bab5afb79d1841424610a99874c2da7R256"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en x x-first x-last">reallyShutdown</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="259" id="diff-2bab5afb79d1841424610a99874c2da7L259"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="257" id="diff-2bab5afb79d1841424610a99874c2da7R257"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">super</span><span class="pl-k">.</span>shutdown();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="260" id="diff-2bab5afb79d1841424610a99874c2da7L260"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="258" id="diff-2bab5afb79d1841424610a99874c2da7R258"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        }</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="261" id="diff-2bab5afb79d1841424610a99874c2da7L261"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="259" id="diff-2bab5afb79d1841424610a99874c2da7R259"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">    }</span></td>
</tr>
<tr class="js-expandable-line" data-position="70">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="262-266" data-right-range="260-264" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;in_wiki_context=&amp;last_left=261&amp;last_right=259&amp;left=273&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=271&amp;right_hunk_size=7" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -273,7 +271,7 @@ public void reallyShutdow() {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="273" id="diff-2bab5afb79d1841424610a99874c2da7L273"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="271" id="diff-2bab5afb79d1841424610a99874c2da7R271"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">BookKeeperClientFactory</span> mockBookKeeperClientFactory <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">BookKeeperClientFactory</span>() {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="274" id="diff-2bab5afb79d1841424610a99874c2da7L274"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="272" id="diff-2bab5afb79d1841424610a99874c2da7R272"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="275" id="diff-2bab5afb79d1841424610a99874c2da7L275"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="273" id="diff-2bab5afb79d1841424610a99874c2da7R273"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">@Override</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="276" id="diff-2bab5afb79d1841424610a99874c2da7L276"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-smi">BookKeeper</span> <span class="pl-en">create</span>(<span class="pl-smi">ServiceConfiguration</span> <span class="pl-v">conf</span>, <span class="pl-smi">ZooKeeper</span> <span class="pl-v">zkClient</span>) <span class="pl-k x x-first">throws</span><span class="x"> </span><span class="pl-smi x">IOException</span><span class="x x-last"> </span>{</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="274" id="diff-2bab5afb79d1841424610a99874c2da7R274"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-smi">BookKeeper</span> <span class="pl-en">create</span>(<span class="pl-smi">ServiceConfiguration</span> <span class="pl-v">conf</span>, <span class="pl-smi">ZooKeeper</span> <span class="pl-v">zkClient</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="277" id="diff-2bab5afb79d1841424610a99874c2da7L277"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="275" id="diff-2bab5afb79d1841424610a99874c2da7R275"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> Always return the same instance (so that we don't loose the mock BK content on broker restart</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="278" id="diff-2bab5afb79d1841424610a99874c2da7L278"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="276" id="diff-2bab5afb79d1841424610a99874c2da7R276"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">return</span> mockBookKeeper;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="279" id="diff-2bab5afb79d1841424610a99874c2da7L279"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="277" id="diff-2bab5afb79d1841424610a99874c2da7R277"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        }</span></td>
</tr>
<tr class="js-expandable-line" data-position="">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander single-expander" data-left-range="280-302" data-right-range="278-302" data-url="/apache/pulsar/blob_excerpt/e65ce0f548dc870dee3bf8c21d3508173fe66e2f?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=279&amp;last_right=277&amp;left=303&amp;left_hunk_size=&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Fauth%2FMockedPulsarServiceBaseTest.java&amp;right=303&amp;right_hunk_size=" href="#diff-2bab5afb79d1841424610a99874c2da7" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2"></td>
</tr>
</table>
</div>
</div>
</div>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="37" id="diff-2bab5afb79d1841424610a99874c2da7L37"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="37" id="diff-2bab5afb79d1841424610a99874c2da7R37"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="38" id="diff-2bab5afb79d1841424610a99874c2da7L38"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="38" id="diff-2bab5afb79d1841424610a99874c2da7R38"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="39" id="diff-2bab5afb79d1841424610a99874c2da7L39"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="39" id="diff-2bab5afb79d1841424610a99874c2da7R39"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-2bab5afb79d1841424610a99874c2da7L40"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="41" id="diff-2bab5afb79d1841424610a99874c2da7L41"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="40" id="diff-2bab5afb79d1841424610a99874c2da7R40"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="42" id="diff-2bab5afb79d1841424610a99874c2da7L42"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="41" id="diff-2bab5afb79d1841424610a99874c2da7R41"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="43" id="diff-2bab5afb79d1841424610a99874c2da7L43"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="42" id="diff-2bab5afb79d1841424610a99874c2da7R42"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-2bab5afb79d1841424610a99874c2da7L93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="92" id="diff-2bab5afb79d1841424610a99874c2da7R92"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-2bab5afb79d1841424610a99874c2da7L94"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-2bab5afb79d1841424610a99874c2da7R93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-2bab5afb79d1841424610a99874c2da7L95"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-2bab5afb79d1841424610a99874c2da7R94"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="96" id="diff-2bab5afb79d1841424610a99874c2da7L96"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="97" id="diff-2bab5afb79d1841424610a99874c2da7L97"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-2bab5afb79d1841424610a99874c2da7R95"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="98" id="diff-2bab5afb79d1841424610a99874c2da7L98"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="96" id="diff-2bab5afb79d1841424610a99874c2da7R96"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="99" id="diff-2bab5afb79d1841424610a99874c2da7L99"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="97" id="diff-2bab5afb79d1841424610a99874c2da7R97"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-2bab5afb79d1841424610a99874c2da7L158"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-2bab5afb79d1841424610a99874c2da7R156"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-2bab5afb79d1841424610a99874c2da7L159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="157" id="diff-2bab5afb79d1841424610a99874c2da7R157"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-2bab5afb79d1841424610a99874c2da7L160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-2bab5afb79d1841424610a99874c2da7R158"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="161" id="diff-2bab5afb79d1841424610a99874c2da7L161"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="159" id="diff-2bab5afb79d1841424610a99874c2da7R159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-2bab5afb79d1841424610a99874c2da7L162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-2bab5afb79d1841424610a99874c2da7R160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="163" id="diff-2bab5afb79d1841424610a99874c2da7L163"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-2bab5afb79d1841424610a99874c2da7R161"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-2bab5afb79d1841424610a99874c2da7L164"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-2bab5afb79d1841424610a99874c2da7R162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="187" id="diff-2bab5afb79d1841424610a99874c2da7L187"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="185" id="diff-2bab5afb79d1841424610a99874c2da7R185"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="188" id="diff-2bab5afb79d1841424610a99874c2da7L188"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="186" id="diff-2bab5afb79d1841424610a99874c2da7R186"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="189" id="diff-2bab5afb79d1841424610a99874c2da7L189"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="187" id="diff-2bab5afb79d1841424610a99874c2da7R187"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="190" id="diff-2bab5afb79d1841424610a99874c2da7L190"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="188" id="diff-2bab5afb79d1841424610a99874c2da7R188"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="191" id="diff-2bab5afb79d1841424610a99874c2da7L191"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="189" id="diff-2bab5afb79d1841424610a99874c2da7R189"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="192" id="diff-2bab5afb79d1841424610a99874c2da7L192"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="190" id="diff-2bab5afb79d1841424610a99874c2da7R190"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="193" id="diff-2bab5afb79d1841424610a99874c2da7L193"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="191" id="diff-2bab5afb79d1841424610a99874c2da7R191"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="199" id="diff-2bab5afb79d1841424610a99874c2da7L199"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="197" id="diff-2bab5afb79d1841424610a99874c2da7R197"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="200" id="diff-2bab5afb79d1841424610a99874c2da7L200"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="198" id="diff-2bab5afb79d1841424610a99874c2da7R198"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="201" id="diff-2bab5afb79d1841424610a99874c2da7L201"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="199" id="diff-2bab5afb79d1841424610a99874c2da7R199"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="202" id="diff-2bab5afb79d1841424610a99874c2da7L202"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="200" id="diff-2bab5afb79d1841424610a99874c2da7R200"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="203" id="diff-2bab5afb79d1841424610a99874c2da7L203"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="201" id="diff-2bab5afb79d1841424610a99874c2da7R201"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="204" id="diff-2bab5afb79d1841424610a99874c2da7L204"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="202" id="diff-2bab5afb79d1841424610a99874c2da7R202"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="205" id="diff-2bab5afb79d1841424610a99874c2da7L205"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="203" id="diff-2bab5afb79d1841424610a99874c2da7R203"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="223" id="diff-2bab5afb79d1841424610a99874c2da7L223"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="221" id="diff-2bab5afb79d1841424610a99874c2da7R221"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="224" id="diff-2bab5afb79d1841424610a99874c2da7L224"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="222" id="diff-2bab5afb79d1841424610a99874c2da7R222"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="225" id="diff-2bab5afb79d1841424610a99874c2da7L225"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="223" id="diff-2bab5afb79d1841424610a99874c2da7R223"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="226" id="diff-2bab5afb79d1841424610a99874c2da7L226"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="224" id="diff-2bab5afb79d1841424610a99874c2da7R224"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="227" id="diff-2bab5afb79d1841424610a99874c2da7L227"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="225" id="diff-2bab5afb79d1841424610a99874c2da7R225"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="228" id="diff-2bab5afb79d1841424610a99874c2da7L228"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="226" id="diff-2bab5afb79d1841424610a99874c2da7R226"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="229" id="diff-2bab5afb79d1841424610a99874c2da7L229"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="227" id="diff-2bab5afb79d1841424610a99874c2da7R227"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="246" id="diff-2bab5afb79d1841424610a99874c2da7L246"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="244" id="diff-2bab5afb79d1841424610a99874c2da7R244"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="247" id="diff-2bab5afb79d1841424610a99874c2da7L247"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="245" id="diff-2bab5afb79d1841424610a99874c2da7R245"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="248" id="diff-2bab5afb79d1841424610a99874c2da7L248"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="246" id="diff-2bab5afb79d1841424610a99874c2da7R246"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="249" id="diff-2bab5afb79d1841424610a99874c2da7L249"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="247" id="diff-2bab5afb79d1841424610a99874c2da7R247"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="250" id="diff-2bab5afb79d1841424610a99874c2da7L250"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="248" id="diff-2bab5afb79d1841424610a99874c2da7R248"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="251" id="diff-2bab5afb79d1841424610a99874c2da7L251"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="249" id="diff-2bab5afb79d1841424610a99874c2da7R249"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="252" id="diff-2bab5afb79d1841424610a99874c2da7L252"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="250" id="diff-2bab5afb79d1841424610a99874c2da7R250"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="255" id="diff-2bab5afb79d1841424610a99874c2da7L255"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="253" id="diff-2bab5afb79d1841424610a99874c2da7R253"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="256" id="diff-2bab5afb79d1841424610a99874c2da7L256"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="254" id="diff-2bab5afb79d1841424610a99874c2da7R254"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="257" id="diff-2bab5afb79d1841424610a99874c2da7L257"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="255" id="diff-2bab5afb79d1841424610a99874c2da7R255"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="258" id="diff-2bab5afb79d1841424610a99874c2da7L258"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="256" id="diff-2bab5afb79d1841424610a99874c2da7R256"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="259" id="diff-2bab5afb79d1841424610a99874c2da7L259"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="257" id="diff-2bab5afb79d1841424610a99874c2da7R257"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="260" id="diff-2bab5afb79d1841424610a99874c2da7L260"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="258" id="diff-2bab5afb79d1841424610a99874c2da7R258"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="261" id="diff-2bab5afb79d1841424610a99874c2da7L261"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="259" id="diff-2bab5afb79d1841424610a99874c2da7R259"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="273" id="diff-2bab5afb79d1841424610a99874c2da7L273"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="271" id="diff-2bab5afb79d1841424610a99874c2da7R271"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="274" id="diff-2bab5afb79d1841424610a99874c2da7L274"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="272" id="diff-2bab5afb79d1841424610a99874c2da7R272"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="275" id="diff-2bab5afb79d1841424610a99874c2da7L275"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="273" id="diff-2bab5afb79d1841424610a99874c2da7R273"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="276" id="diff-2bab5afb79d1841424610a99874c2da7L276"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="274" id="diff-2bab5afb79d1841424610a99874c2da7R274"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="277" id="diff-2bab5afb79d1841424610a99874c2da7L277"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="275" id="diff-2bab5afb79d1841424610a99874c2da7R275"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="278" id="diff-2bab5afb79d1841424610a99874c2da7L278"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="276" id="diff-2bab5afb79d1841424610a99874c2da7R276"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="279" id="diff-2bab5afb79d1841424610a99874c2da7L279"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="277" id="diff-2bab5afb79d1841424610a99874c2da7R277"></td>
<div class="file js-file js-details-container Details Details--on open show-inline-notes " id="diff-2">
<div class="file-header file-header--expandable js-file-header " data-anchor="diff-6f1a020a5705b2396e23200629583bd2" data-file-deleted="false" data-file-type=".java" data-path="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java" data-short-path="6f1a020">
<div class="file-actions">
<span class="show-file-notes pt-1">
<label>
<input checked="checked" class="js-toggle-file-notes" type="checkbox"/>
            Show comments
          </label>
</span>
<div class="BtnGroup">
<clipboard-copy class="btn btn-sm BtnGroup-item" value="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java">
                Copy path
              </clipboard-copy>
<a class="btn btn-sm BtnGroup-item" href="/aahmed-se/incubator-pulsar/blob/647925440140c8184e865956eb1147deb2f9d4b6/pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java" rel="nofollow">
              View file
            </a>
</div>
<button aria-expanded="true" aria-label="Toggle diff contents" class="btn-octicon p-1 pr-2 js-details-target tooltipped tooltipped-w" type="button">
<svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z" fill-rule="evenodd"></path></svg>
<svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z" fill-rule="evenodd"></path></svg>
</button>
</div>
<div class="file-info">
<span aria-label="34 additions &amp; 36 deletions" class="diffstat tooltipped tooltipped-e">70 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>
<a class="link-gray-dark" href="#diff-6f1a020a5705b2396e23200629583bd2" title="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java">pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java</a>
</div>
</div>
<div class="js-file-content Details-content--hidden">
<div class="data highlight js-blob-wrapper " style="overflow-x: auto">
<table class="diff-table js-diff-table tab-size " data-diff-anchor="diff-6f1a020a5705b2396e23200629583bd2" data-tab-size="8">
<tr class="js-expandable-line" data-position="0">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Up" class="js-expand directional-expander single-expander" data-left-range="1-17" data-right-range="1-17" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=18&amp;left_hunk_size=33&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=18&amp;right_hunk_size=11" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -18,33 +18,11 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-6f1a020a5705b2396e23200629583bd2L18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-6f1a020a5705b2396e23200629583bd2R18"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c"> <span class="pl-c">*/</span></span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-6f1a020a5705b2396e23200629583bd2L19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-6f1a020a5705b2396e23200629583bd2R19"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">package</span> <span class="pl-smi">org.apache.pulsar.broker.loadbalance</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-6f1a020a5705b2396e23200629583bd2L20"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-6f1a020a5705b2396e23200629583bd2R20"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="21" id="diff-6f1a020a5705b2396e23200629583bd2L21"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.apache.pulsar.broker.cache.ConfigurationCacheService.POLICIES</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="22" id="diff-6f1a020a5705b2396e23200629583bd2L22"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.mock</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="23" id="diff-6f1a020a5705b2396e23200629583bd2L23"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.never</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="24" id="diff-6f1a020a5705b2396e23200629583bd2L24"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.times</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="25" id="diff-6f1a020a5705b2396e23200629583bd2L25"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.verify</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="26" id="diff-6f1a020a5705b2396e23200629583bd2L26"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.when</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="27" id="diff-6f1a020a5705b2396e23200629583bd2L27"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="28" id="diff-6f1a020a5705b2396e23200629583bd2L28"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertTrue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="29" id="diff-6f1a020a5705b2396e23200629583bd2L29"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.fail</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="30" id="diff-6f1a020a5705b2396e23200629583bd2L30"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="31" id="diff-6f1a020a5705b2396e23200629583bd2L31"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Field</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="32" id="diff-6f1a020a5705b2396e23200629583bd2L32"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.InetAddress</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="33" id="diff-6f1a020a5705b2396e23200629583bd2L33"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.URL</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="34" id="diff-6f1a020a5705b2396e23200629583bd2L34"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.ArrayList</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="35" id="diff-6f1a020a5705b2396e23200629583bd2L35"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.HashMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="36" id="diff-6f1a020a5705b2396e23200629583bd2L36"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.HashSet</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="37" id="diff-6f1a020a5705b2396e23200629583bd2L37"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.List</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="38" id="diff-6f1a020a5705b2396e23200629583bd2L38"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Map</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="39" id="diff-6f1a020a5705b2396e23200629583bd2L39"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Set</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-6f1a020a5705b2396e23200629583bd2L40"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.TreeMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="41" id="diff-6f1a020a5705b2396e23200629583bd2L41"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutorService</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="42" id="diff-6f1a020a5705b2396e23200629583bd2L42"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.LinkedBlockingQueue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="43" id="diff-6f1a020a5705b2396e23200629583bd2L43"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ThreadPoolExecutor</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="44" id="diff-6f1a020a5705b2396e23200629583bd2L44"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.TimeUnit</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="45" id="diff-6f1a020a5705b2396e23200629583bd2L45"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicIntegerFieldUpdater</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="46" id="diff-6f1a020a5705b2396e23200629583bd2L46"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicReference</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="47" id="diff-6f1a020a5705b2396e23200629583bd2L47"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="21" id="diff-6f1a020a5705b2396e23200629583bd2R21"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.databind.ObjectMapper</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="22" id="diff-6f1a020a5705b2396e23200629583bd2R22"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.base.Charsets</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="23" id="diff-6f1a020a5705b2396e23200629583bd2R23"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Lists</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="24" id="diff-6f1a020a5705b2396e23200629583bd2R24"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Maps</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="25" id="diff-6f1a020a5705b2396e23200629583bd2R25"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Sets</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="48" id="diff-6f1a020a5705b2396e23200629583bd2L48"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="26" id="diff-6f1a020a5705b2396e23200629583bd2R26"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.test.PortManager</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1a020a5705b2396e23200629583bd2L49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="27" id="diff-6f1a020a5705b2396e23200629583bd2R27"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.util.ZkUtils</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1a020a5705b2396e23200629583bd2L50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="28" id="diff-6f1a020a5705b2396e23200629583bd2R28"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.pulsar.broker.PulsarService</span>;</span></td>
</tr>
<tr class="js-expandable-line" data-position="39">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="51-66" data-right-range="29-44" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=50&amp;last_right=28&amp;left=85&amp;left_hunk_size=11&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=63&amp;right_hunk_size=31" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="67-84" data-right-range="45-62" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=50&amp;last_right=28&amp;left=85&amp;left_hunk_size=11&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=63&amp;right_hunk_size=31" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -85,11 +63,31 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="85" id="diff-6f1a020a5705b2396e23200629583bd2L85"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="63" id="diff-6f1a020a5705b2396e23200629583bd2R63"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.testng.annotations.BeforeMethod</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-6f1a020a5705b2396e23200629583bd2L86"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="64" id="diff-6f1a020a5705b2396e23200629583bd2R64"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.testng.annotations.Test</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-6f1a020a5705b2396e23200629583bd2L87"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="65" id="diff-6f1a020a5705b2396e23200629583bd2R65"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="88" id="diff-6f1a020a5705b2396e23200629583bd2L88"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.databind.ObjectMapper</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="89" id="diff-6f1a020a5705b2396e23200629583bd2L89"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.base.Charsets</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="90" id="diff-6f1a020a5705b2396e23200629583bd2L90"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Lists</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="91" id="diff-6f1a020a5705b2396e23200629583bd2L91"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Maps</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="92" id="diff-6f1a020a5705b2396e23200629583bd2L92"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Sets</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="66" id="diff-6f1a020a5705b2396e23200629583bd2R66"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Field</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="67" id="diff-6f1a020a5705b2396e23200629583bd2R67"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.URL</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="68" id="diff-6f1a020a5705b2396e23200629583bd2R68"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.ArrayList</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="69" id="diff-6f1a020a5705b2396e23200629583bd2R69"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.HashMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="70" id="diff-6f1a020a5705b2396e23200629583bd2R70"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.HashSet</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="71" id="diff-6f1a020a5705b2396e23200629583bd2R71"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.List</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="72" id="diff-6f1a020a5705b2396e23200629583bd2R72"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Map</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="73" id="diff-6f1a020a5705b2396e23200629583bd2R73"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Set</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="74" id="diff-6f1a020a5705b2396e23200629583bd2R74"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.TreeMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="75" id="diff-6f1a020a5705b2396e23200629583bd2R75"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutorService</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="76" id="diff-6f1a020a5705b2396e23200629583bd2R76"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.LinkedBlockingQueue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="77" id="diff-6f1a020a5705b2396e23200629583bd2R77"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ThreadPoolExecutor</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="78" id="diff-6f1a020a5705b2396e23200629583bd2R78"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.TimeUnit</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="79" id="diff-6f1a020a5705b2396e23200629583bd2R79"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicIntegerFieldUpdater</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="80" id="diff-6f1a020a5705b2396e23200629583bd2R80"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicReference</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="81" id="diff-6f1a020a5705b2396e23200629583bd2R81"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="82" id="diff-6f1a020a5705b2396e23200629583bd2R82"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.apache.pulsar.broker.cache.ConfigurationCacheService.POLICIES</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="83" id="diff-6f1a020a5705b2396e23200629583bd2R83"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.mock</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="84" id="diff-6f1a020a5705b2396e23200629583bd2R84"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.never</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="85" id="diff-6f1a020a5705b2396e23200629583bd2R85"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.times</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="86" id="diff-6f1a020a5705b2396e23200629583bd2R86"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.verify</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="87" id="diff-6f1a020a5705b2396e23200629583bd2R87"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.when</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="88" id="diff-6f1a020a5705b2396e23200629583bd2R88"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="89" id="diff-6f1a020a5705b2396e23200629583bd2R89"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertTrue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="90" id="diff-6f1a020a5705b2396e23200629583bd2R90"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.fail</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-6f1a020a5705b2396e23200629583bd2L93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="91" id="diff-6f1a020a5705b2396e23200629583bd2R91"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-6f1a020a5705b2396e23200629583bd2L94"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="92" id="diff-6f1a020a5705b2396e23200629583bd2R92"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c"><span class="pl-c">/**</span></span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-6f1a020a5705b2396e23200629583bd2L95"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-6f1a020a5705b2396e23200629583bd2R93"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c"> * Start two brokers in the same cluster and have them connect to the same zookeeper. When the PulsarService starts, it</span></span></td>
</tr>
<tr class="js-expandable-line" data-position="76">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="96-97" data-right-range="94-95" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;in_wiki_context=&amp;last_left=95&amp;last_right=93&amp;left=101&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=99&amp;right_hunk_size=7" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -101,7 +99,7 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="101" id="diff-6f1a020a5705b2396e23200629583bd2L101"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="99" id="diff-6f1a020a5705b2396e23200629583bd2R99"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">LoadBalancerTest</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="102" id="diff-6f1a020a5705b2396e23200629583bd2L102"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="100" id="diff-6f1a020a5705b2396e23200629583bd2R100"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">LocalBookkeeperEnsemble</span> bkEnsemble;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-6f1a020a5705b2396e23200629583bd2L103"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="101" id="diff-6f1a020a5705b2396e23200629583bd2R101"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="104" id="diff-6f1a020a5705b2396e23200629583bd2L104"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-smi">ExecutorService</span> executor <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ThreadPoolExecutor</span>(<span class="pl-c1">5</span>, <span class="pl-c1">20</span>, <span class="pl-c1">30</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>SECONDS</span>, <span class="pl-k">new</span> <span class="pl-k">LinkedBlockingQueue&lt;<span class="pl-smi x x-first x-last">Runnable</span>&gt;</span>());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="102" id="diff-6f1a020a5705b2396e23200629583bd2R102"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-smi">ExecutorService</span> executor <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ThreadPoolExecutor</span>(<span class="pl-c1">5</span>, <span class="pl-c1">20</span>, <span class="pl-c1">30</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>SECONDS</span>, <span class="pl-k">new</span> <span class="pl-k">LinkedBlockingQueue&lt;&gt;</span>());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-6f1a020a5705b2396e23200629583bd2L105"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-6f1a020a5705b2396e23200629583bd2R103"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="106" id="diff-6f1a020a5705b2396e23200629583bd2L106"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="104" id="diff-6f1a020a5705b2396e23200629583bd2R104"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">Logger</span> log <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">LoadBalancerTest</span><span class="pl-k">.</span>class);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-6f1a020a5705b2396e23200629583bd2L107"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-6f1a020a5705b2396e23200629583bd2R105"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr class="js-expandable-line" data-position="85">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="108-116" data-right-range="106-114" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;in_wiki_context=&amp;last_left=107&amp;last_right=105&amp;left=127&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=125&amp;right_hunk_size=7" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -127,7 +125,7 @@ void setup() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1a020a5705b2396e23200629583bd2L127"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="125" id="diff-6f1a020a5705b2396e23200629583bd2R125"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-s"><span class="pl-pds">"</span>{<span class="pl-cce">\"</span>loadBalancerStrategy<span class="pl-cce">\"</span>:<span class="pl-cce">\"</span>leastLoadedServer<span class="pl-cce">\"</span>}<span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(), <span class="pl-smi">ZooDefs</span><span class="pl-k">.</span><span class="pl-smi">Ids</span><span class="pl-c1"><span class="pl-k">.</span>OPEN_ACL_UNSAFE</span>,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1a020a5705b2396e23200629583bd2L128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="126" id="diff-6f1a020a5705b2396e23200629583bd2R126"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">CreateMode</span><span class="pl-c1"><span class="pl-k">.</span>PERSISTENT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1a020a5705b2396e23200629583bd2L129"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1a020a5705b2396e23200629583bd2R127"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="130" id="diff-6f1a020a5705b2396e23200629583bd2L130"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">final</span> <span class="pl-smi">String</span> localhost <span class="pl-k">=</span> <span class="pl-smi x x-first">InetAddress</span><span class="pl-k x">.</span><span class="x">getLocalHost()</span><span class="pl-k x">.</span><span class="x x-last">getHostName()</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="128" id="diff-6f1a020a5705b2396e23200629583bd2R128"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">final</span> <span class="pl-smi">String</span> localhost <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds x x-first">"</span><span class="x">localhost</span><span class="pl-pds x x-last">"</span></span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="131" id="diff-6f1a020a5705b2396e23200629583bd2L131"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1a020a5705b2396e23200629583bd2R129"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> start brokers</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="132" id="diff-6f1a020a5705b2396e23200629583bd2L132"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="130" id="diff-6f1a020a5705b2396e23200629583bd2R130"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">BROKER_COUNT</span>; i<span class="pl-k">++</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="133" id="diff-6f1a020a5705b2396e23200629583bd2L133"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="131" id="diff-6f1a020a5705b2396e23200629583bd2R131"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            brokerWebServicePorts[i] <span class="pl-k">=</span> <span class="pl-smi">PortManager</span><span class="pl-k">.</span>nextFreePort();</span></td>
</tr>
<tr class="js-expandable-line" data-position="94">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="134-133" data-right-range="132-131" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;in_wiki_context=&amp;last_left=133&amp;last_right=131&amp;left=136&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=134&amp;right_hunk_size=7" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -136,7 +134,7 @@ void setup() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="136" id="diff-6f1a020a5705b2396e23200629583bd2L136"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="134" id="diff-6f1a020a5705b2396e23200629583bd2R134"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">ServiceConfiguration</span> config <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ServiceConfiguration</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="137" id="diff-6f1a020a5705b2396e23200629583bd2L137"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="135" id="diff-6f1a020a5705b2396e23200629583bd2R135"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setBrokerServicePort(brokerNativeBrokerPorts[i]);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="138" id="diff-6f1a020a5705b2396e23200629583bd2L138"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="136" id="diff-6f1a020a5705b2396e23200629583bd2R136"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setClusterName(<span class="pl-s"><span class="pl-pds">"</span>use<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="139" id="diff-6f1a020a5705b2396e23200629583bd2L139"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setAdvertisedAddress(<span class="pl-s"><span class="pl-pds x x-first x-last">"</span>localhost<span class="pl-pds x x-first x-last">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="137" id="diff-6f1a020a5705b2396e23200629583bd2R137"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setAdvertisedAddress(localhost);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="140" id="diff-6f1a020a5705b2396e23200629583bd2L140"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="138" id="diff-6f1a020a5705b2396e23200629583bd2R138"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setWebServicePort(brokerWebServicePorts[i]);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="141" id="diff-6f1a020a5705b2396e23200629583bd2L141"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="139" id="diff-6f1a020a5705b2396e23200629583bd2R139"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setZookeeperServers(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">ZOOKEEPER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="142" id="diff-6f1a020a5705b2396e23200629583bd2L142"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="140" id="diff-6f1a020a5705b2396e23200629583bd2R140"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">            config<span class="pl-k">.</span>setBrokerServicePort(brokerNativeBrokerPorts[i]);</span></td>
</tr>
<tr class="js-expandable-line" data-position="103">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="143-562" data-right-range="141-560" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=142&amp;last_right=140&amp;left=984&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=982&amp;right_hunk_size=7" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="563-983" data-right-range="561-981" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=142&amp;last_right=140&amp;left=984&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=982&amp;right_hunk_size=7" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -984,7 +982,7 @@ void testLoadBalanceDistributionAmongUnequallyLoaded() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="984" id="diff-6f1a020a5705b2396e23200629583bd2L984"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="982" id="diff-6f1a020a5705b2396e23200629583bd2R982"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        zkCacheField<span class="pl-k">.</span>set(pulsarServices[<span class="pl-c1">0</span>], mockCache);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="985" id="diff-6f1a020a5705b2396e23200629583bd2L985"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="983" id="diff-6f1a020a5705b2396e23200629583bd2R983"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="986" id="diff-6f1a020a5705b2396e23200629583bd2L986"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="984" id="diff-6f1a020a5705b2396e23200629583bd2R984"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">int</span> totalAvailabilityWeight <span class="pl-k">=</span> <span class="pl-c1">0</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="987" id="diff-6f1a020a5705b2396e23200629583bd2L987"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-k">TreeMap&lt;<span class="pl-smi">Long</span>, <span class="pl-k">Set&lt;<span class="pl-smi">ResourceUnit</span>&gt;</span>&gt;</span> sortedRankingsInstance <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">TreeMap&lt;<span class="pl-smi x x-first">Long</span><span class="x">, </span><span class="pl-k"><span class="x">Set&lt;</span><span class="pl-smi x">ResourceUnit</span><span class="x x-last">&gt;</span></span>&gt;</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="985" id="diff-6f1a020a5705b2396e23200629583bd2R985"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">TreeMap&lt;<span class="pl-smi">Long</span>, <span class="pl-k">Set&lt;<span class="pl-smi">ResourceUnit</span>&gt;</span>&gt;</span> sortedRankingsInstance <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">TreeMap&lt;&gt;</span>();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="988" id="diff-6f1a020a5705b2396e23200629583bd2L988"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="986" id="diff-6f1a020a5705b2396e23200629583bd2R986"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>; i <span class="pl-k">&lt;=</span> <span class="pl-c1">3</span>; i<span class="pl-k">++</span>) {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="989" id="diff-6f1a020a5705b2396e23200629583bd2L989"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="987" id="diff-6f1a020a5705b2396e23200629583bd2R987"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">PulsarResourceDescription</span> rd <span class="pl-k">=</span> createResourceDescription(memoryMB <span class="pl-k">*</span> i, cpuPercent <span class="pl-k">*</span> i, bInMbps <span class="pl-k">*</span> i,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="990" id="diff-6f1a020a5705b2396e23200629583bd2L990"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="988" id="diff-6f1a020a5705b2396e23200629583bd2R988"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">                    bOutMbps <span class="pl-k">*</span> <span class="pl-c1">2</span>, threads <span class="pl-k">*</span> i);</span></td>
</tr>
<tr class="js-expandable-line" data-position="">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander single-expander" data-left-range="991-1034" data-right-range="989-1034" data-url="/apache/pulsar/blob_excerpt/3b5c5779e82d9718cd0bc8336f1b90cb2b6dad0e?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=990&amp;last_right=988&amp;left=1035&amp;left_hunk_size=&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FLoadBalancerTest.java&amp;right=1035&amp;right_hunk_size=" href="#diff-6f1a020a5705b2396e23200629583bd2" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2"></td>
</tr>
</table>
</div>
</div>
</div>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-6f1a020a5705b2396e23200629583bd2L18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-6f1a020a5705b2396e23200629583bd2R18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-6f1a020a5705b2396e23200629583bd2L19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-6f1a020a5705b2396e23200629583bd2R19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-6f1a020a5705b2396e23200629583bd2L20"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-6f1a020a5705b2396e23200629583bd2R20"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="21" id="diff-6f1a020a5705b2396e23200629583bd2L21"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="22" id="diff-6f1a020a5705b2396e23200629583bd2L22"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="23" id="diff-6f1a020a5705b2396e23200629583bd2L23"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="24" id="diff-6f1a020a5705b2396e23200629583bd2L24"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="25" id="diff-6f1a020a5705b2396e23200629583bd2L25"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="26" id="diff-6f1a020a5705b2396e23200629583bd2L26"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="27" id="diff-6f1a020a5705b2396e23200629583bd2L27"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="28" id="diff-6f1a020a5705b2396e23200629583bd2L28"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="29" id="diff-6f1a020a5705b2396e23200629583bd2L29"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="30" id="diff-6f1a020a5705b2396e23200629583bd2L30"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="31" id="diff-6f1a020a5705b2396e23200629583bd2L31"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="32" id="diff-6f1a020a5705b2396e23200629583bd2L32"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="33" id="diff-6f1a020a5705b2396e23200629583bd2L33"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="34" id="diff-6f1a020a5705b2396e23200629583bd2L34"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="35" id="diff-6f1a020a5705b2396e23200629583bd2L35"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="36" id="diff-6f1a020a5705b2396e23200629583bd2L36"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="37" id="diff-6f1a020a5705b2396e23200629583bd2L37"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="38" id="diff-6f1a020a5705b2396e23200629583bd2L38"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="39" id="diff-6f1a020a5705b2396e23200629583bd2L39"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-6f1a020a5705b2396e23200629583bd2L40"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="41" id="diff-6f1a020a5705b2396e23200629583bd2L41"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="42" id="diff-6f1a020a5705b2396e23200629583bd2L42"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="43" id="diff-6f1a020a5705b2396e23200629583bd2L43"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="44" id="diff-6f1a020a5705b2396e23200629583bd2L44"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="45" id="diff-6f1a020a5705b2396e23200629583bd2L45"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="46" id="diff-6f1a020a5705b2396e23200629583bd2L46"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="47" id="diff-6f1a020a5705b2396e23200629583bd2L47"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="21" id="diff-6f1a020a5705b2396e23200629583bd2R21"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="22" id="diff-6f1a020a5705b2396e23200629583bd2R22"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="23" id="diff-6f1a020a5705b2396e23200629583bd2R23"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="24" id="diff-6f1a020a5705b2396e23200629583bd2R24"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="25" id="diff-6f1a020a5705b2396e23200629583bd2R25"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="48" id="diff-6f1a020a5705b2396e23200629583bd2L48"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="26" id="diff-6f1a020a5705b2396e23200629583bd2R26"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="49" id="diff-6f1a020a5705b2396e23200629583bd2L49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="27" id="diff-6f1a020a5705b2396e23200629583bd2R27"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-6f1a020a5705b2396e23200629583bd2L50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="28" id="diff-6f1a020a5705b2396e23200629583bd2R28"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="85" id="diff-6f1a020a5705b2396e23200629583bd2L85"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="63" id="diff-6f1a020a5705b2396e23200629583bd2R63"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-6f1a020a5705b2396e23200629583bd2L86"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="64" id="diff-6f1a020a5705b2396e23200629583bd2R64"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-6f1a020a5705b2396e23200629583bd2L87"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="65" id="diff-6f1a020a5705b2396e23200629583bd2R65"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="88" id="diff-6f1a020a5705b2396e23200629583bd2L88"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="89" id="diff-6f1a020a5705b2396e23200629583bd2L89"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="90" id="diff-6f1a020a5705b2396e23200629583bd2L90"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="91" id="diff-6f1a020a5705b2396e23200629583bd2L91"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="92" id="diff-6f1a020a5705b2396e23200629583bd2L92"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="66" id="diff-6f1a020a5705b2396e23200629583bd2R66"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="67" id="diff-6f1a020a5705b2396e23200629583bd2R67"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="68" id="diff-6f1a020a5705b2396e23200629583bd2R68"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="69" id="diff-6f1a020a5705b2396e23200629583bd2R69"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="70" id="diff-6f1a020a5705b2396e23200629583bd2R70"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="71" id="diff-6f1a020a5705b2396e23200629583bd2R71"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="72" id="diff-6f1a020a5705b2396e23200629583bd2R72"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="73" id="diff-6f1a020a5705b2396e23200629583bd2R73"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="74" id="diff-6f1a020a5705b2396e23200629583bd2R74"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="75" id="diff-6f1a020a5705b2396e23200629583bd2R75"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="76" id="diff-6f1a020a5705b2396e23200629583bd2R76"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="77" id="diff-6f1a020a5705b2396e23200629583bd2R77"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="78" id="diff-6f1a020a5705b2396e23200629583bd2R78"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="79" id="diff-6f1a020a5705b2396e23200629583bd2R79"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="80" id="diff-6f1a020a5705b2396e23200629583bd2R80"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="81" id="diff-6f1a020a5705b2396e23200629583bd2R81"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="82" id="diff-6f1a020a5705b2396e23200629583bd2R82"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="83" id="diff-6f1a020a5705b2396e23200629583bd2R83"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="84" id="diff-6f1a020a5705b2396e23200629583bd2R84"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="85" id="diff-6f1a020a5705b2396e23200629583bd2R85"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="86" id="diff-6f1a020a5705b2396e23200629583bd2R86"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="87" id="diff-6f1a020a5705b2396e23200629583bd2R87"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="88" id="diff-6f1a020a5705b2396e23200629583bd2R88"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="89" id="diff-6f1a020a5705b2396e23200629583bd2R89"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="90" id="diff-6f1a020a5705b2396e23200629583bd2R90"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-6f1a020a5705b2396e23200629583bd2L93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="91" id="diff-6f1a020a5705b2396e23200629583bd2R91"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="94" id="diff-6f1a020a5705b2396e23200629583bd2L94"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="92" id="diff-6f1a020a5705b2396e23200629583bd2R92"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="95" id="diff-6f1a020a5705b2396e23200629583bd2L95"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="93" id="diff-6f1a020a5705b2396e23200629583bd2R93"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="101" id="diff-6f1a020a5705b2396e23200629583bd2L101"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="99" id="diff-6f1a020a5705b2396e23200629583bd2R99"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="102" id="diff-6f1a020a5705b2396e23200629583bd2L102"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="100" id="diff-6f1a020a5705b2396e23200629583bd2R100"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-6f1a020a5705b2396e23200629583bd2L103"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="101" id="diff-6f1a020a5705b2396e23200629583bd2R101"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="104" id="diff-6f1a020a5705b2396e23200629583bd2L104"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="102" id="diff-6f1a020a5705b2396e23200629583bd2R102"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-6f1a020a5705b2396e23200629583bd2L105"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-6f1a020a5705b2396e23200629583bd2R103"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="106" id="diff-6f1a020a5705b2396e23200629583bd2L106"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="104" id="diff-6f1a020a5705b2396e23200629583bd2R104"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-6f1a020a5705b2396e23200629583bd2L107"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-6f1a020a5705b2396e23200629583bd2R105"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1a020a5705b2396e23200629583bd2L127"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="125" id="diff-6f1a020a5705b2396e23200629583bd2R125"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="128" id="diff-6f1a020a5705b2396e23200629583bd2L128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="126" id="diff-6f1a020a5705b2396e23200629583bd2R126"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1a020a5705b2396e23200629583bd2L129"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="127" id="diff-6f1a020a5705b2396e23200629583bd2R127"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="130" id="diff-6f1a020a5705b2396e23200629583bd2L130"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="128" id="diff-6f1a020a5705b2396e23200629583bd2R128"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="131" id="diff-6f1a020a5705b2396e23200629583bd2L131"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="129" id="diff-6f1a020a5705b2396e23200629583bd2R129"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="132" id="diff-6f1a020a5705b2396e23200629583bd2L132"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="130" id="diff-6f1a020a5705b2396e23200629583bd2R130"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="133" id="diff-6f1a020a5705b2396e23200629583bd2L133"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="131" id="diff-6f1a020a5705b2396e23200629583bd2R131"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="136" id="diff-6f1a020a5705b2396e23200629583bd2L136"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="134" id="diff-6f1a020a5705b2396e23200629583bd2R134"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="137" id="diff-6f1a020a5705b2396e23200629583bd2L137"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="135" id="diff-6f1a020a5705b2396e23200629583bd2R135"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="138" id="diff-6f1a020a5705b2396e23200629583bd2L138"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="136" id="diff-6f1a020a5705b2396e23200629583bd2R136"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="139" id="diff-6f1a020a5705b2396e23200629583bd2L139"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="137" id="diff-6f1a020a5705b2396e23200629583bd2R137"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="140" id="diff-6f1a020a5705b2396e23200629583bd2L140"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="138" id="diff-6f1a020a5705b2396e23200629583bd2R138"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="141" id="diff-6f1a020a5705b2396e23200629583bd2L141"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="139" id="diff-6f1a020a5705b2396e23200629583bd2R139"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="142" id="diff-6f1a020a5705b2396e23200629583bd2L142"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="140" id="diff-6f1a020a5705b2396e23200629583bd2R140"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="984" id="diff-6f1a020a5705b2396e23200629583bd2L984"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="982" id="diff-6f1a020a5705b2396e23200629583bd2R982"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="985" id="diff-6f1a020a5705b2396e23200629583bd2L985"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="983" id="diff-6f1a020a5705b2396e23200629583bd2R983"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="986" id="diff-6f1a020a5705b2396e23200629583bd2L986"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="984" id="diff-6f1a020a5705b2396e23200629583bd2R984"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="987" id="diff-6f1a020a5705b2396e23200629583bd2L987"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="985" id="diff-6f1a020a5705b2396e23200629583bd2R985"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="988" id="diff-6f1a020a5705b2396e23200629583bd2L988"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="986" id="diff-6f1a020a5705b2396e23200629583bd2R986"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="989" id="diff-6f1a020a5705b2396e23200629583bd2L989"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="987" id="diff-6f1a020a5705b2396e23200629583bd2R987"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="990" id="diff-6f1a020a5705b2396e23200629583bd2L990"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="988" id="diff-6f1a020a5705b2396e23200629583bd2R988"></td>
<div class="file js-file js-details-container Details Details--on open show-inline-notes " id="diff-3">
<div class="file-header file-header--expandable js-file-header " data-anchor="diff-e93e98516fbe218558d6e4cf41e500fa" data-file-deleted="false" data-file-type=".java" data-path="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/ModularLoadManagerImplTest.java" data-short-path="e93e985">
<div class="file-actions">
<span class="show-file-notes pt-1">
<label>
<input checked="checked" class="js-toggle-file-notes" type="checkbox"/>
            Show comments
          </label>
</span>
<div class="BtnGroup">
<clipboard-copy class="btn btn-sm BtnGroup-item" value="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/ModularLoadManagerImplTest.java">
                Copy path
              </clipboard-copy>
<a class="btn btn-sm BtnGroup-item" href="/aahmed-se/incubator-pulsar/blob/647925440140c8184e865956eb1147deb2f9d4b6/pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/ModularLoadManagerImplTest.java" rel="nofollow">
              View file
            </a>
</div>
<button aria-expanded="true" aria-label="Toggle diff contents" class="btn-octicon p-1 pr-2 js-details-target tooltipped tooltipped-w" type="button">
<svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z" fill-rule="evenodd"></path></svg>
<svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10"><path d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z" fill-rule="evenodd"></path></svg>
</button>
</div>
<div class="file-info">
<span aria-label="30 additions &amp; 30 deletions" class="diffstat tooltipped tooltipped-e">60 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>
<a class="link-gray-dark" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/ModularLoadManagerImplTest.java">...broker/src/test/java/org/apache/pulsar/broker/loadbalance/ModularLoadManagerImplTest.java</a>
</div>
</div>
<div class="js-file-content Details-content--hidden">
<div class="data highlight js-blob-wrapper " style="overflow-x: auto">
<table class="diff-table js-diff-table tab-size " data-diff-anchor="diff-e93e98516fbe218558d6e4cf41e500fa" data-tab-size="8">
<tr class="js-expandable-line" data-position="0">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Up" class="js-expand directional-expander single-expander" data-left-range="1-17" data-right-range="1-17" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=&amp;last_right=&amp;left=18&amp;left_hunk_size=35&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=18&amp;right_hunk_size=11" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -18,35 +18,11 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-e93e98516fbe218558d6e4cf41e500faL18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-e93e98516fbe218558d6e4cf41e500faR18"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-c"> <span class="pl-c">*/</span></span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-e93e98516fbe218558d6e4cf41e500faL19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-e93e98516fbe218558d6e4cf41e500faR19"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">package</span> <span class="pl-smi">org.apache.pulsar.broker.loadbalance</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-e93e98516fbe218558d6e4cf41e500faL20"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-e93e98516fbe218558d6e4cf41e500faR20"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="21" id="diff-e93e98516fbe218558d6e4cf41e500faL21"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.doAnswer</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="22" id="diff-e93e98516fbe218558d6e4cf41e500faL22"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.spy</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="23" id="diff-e93e98516fbe218558d6e4cf41e500faL23"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.verify</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="24" id="diff-e93e98516fbe218558d6e4cf41e500faL24"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.when</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="25" id="diff-e93e98516fbe218558d6e4cf41e500faL25"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="26" id="diff-e93e98516fbe218558d6e4cf41e500faL26"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertFalse</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="27" id="diff-e93e98516fbe218558d6e4cf41e500faL27"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertNotEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="28" id="diff-e93e98516fbe218558d6e4cf41e500faL28"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertTrue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="29" id="diff-e93e98516fbe218558d6e4cf41e500faL29"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="30" id="diff-e93e98516fbe218558d6e4cf41e500faL30"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="21" id="diff-e93e98516fbe218558d6e4cf41e500faR21"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.databind.ObjectMapper</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="31" id="diff-e93e98516fbe218558d6e4cf41e500faL31"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="22" id="diff-e93e98516fbe218558d6e4cf41e500faR22"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.BoundType</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="32" id="diff-e93e98516fbe218558d6e4cf41e500faL32"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="23" id="diff-e93e98516fbe218558d6e4cf41e500faR23"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Range</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="33" id="diff-e93e98516fbe218558d6e4cf41e500faL33"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="24" id="diff-e93e98516fbe218558d6e4cf41e500faR24"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Sets</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="34" id="diff-e93e98516fbe218558d6e4cf41e500faL34"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="25" id="diff-e93e98516fbe218558d6e4cf41e500faR25"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">com.google.common.hash.Hashing</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="35" id="diff-e93e98516fbe218558d6e4cf41e500faL35"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="36" id="diff-e93e98516fbe218558d6e4cf41e500faL36"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Field</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="37" id="diff-e93e98516fbe218558d6e4cf41e500faL37"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Method</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="38" id="diff-e93e98516fbe218558d6e4cf41e500faL38"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.InetAddress</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="39" id="diff-e93e98516fbe218558d6e4cf41e500faL39"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.URL</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-e93e98516fbe218558d6e4cf41e500faL40"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Map</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="41" id="diff-e93e98516fbe218558d6e4cf41e500faL41"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Set</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="42" id="diff-e93e98516fbe218558d6e4cf41e500faL42"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ConcurrentHashMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="43" id="diff-e93e98516fbe218558d6e4cf41e500faL43"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutorService</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="44" id="diff-e93e98516fbe218558d6e4cf41e500faL44"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.LinkedBlockingQueue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="45" id="diff-e93e98516fbe218558d6e4cf41e500faL45"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ThreadPoolExecutor</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="46" id="diff-e93e98516fbe218558d6e4cf41e500faL46"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.TimeUnit</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="47" id="diff-e93e98516fbe218558d6e4cf41e500faL47"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicReference</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="48" id="diff-e93e98516fbe218558d6e4cf41e500faL48"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.function.Supplier</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="49" id="diff-e93e98516fbe218558d6e4cf41e500faL49"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-e93e98516fbe218558d6e4cf41e500faL50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="26" id="diff-e93e98516fbe218558d6e4cf41e500faR26"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.test.PortManager</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-e93e98516fbe218558d6e4cf41e500faL51"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="27" id="diff-e93e98516fbe218558d6e4cf41e500faR27"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.bookkeeper.util.ZkUtils</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="52" id="diff-e93e98516fbe218558d6e4cf41e500faL52"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="28" id="diff-e93e98516fbe218558d6e4cf41e500faR28"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.apache.pulsar.broker.BrokerData</span>;</span></td>
</tr>
<tr class="js-expandable-line" data-position="36">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="53-67" data-right-range="29-43" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=52&amp;last_right=28&amp;left=85&amp;left_hunk_size=6&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=61&amp;right_hunk_size=28" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="68-84" data-right-range="44-60" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=52&amp;last_right=28&amp;left=85&amp;left_hunk_size=6&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=61&amp;right_hunk_size=28" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -85,6 +61,28 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="85" id="diff-e93e98516fbe218558d6e4cf41e500faL85"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="61" id="diff-e93e98516fbe218558d6e4cf41e500faR61"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.testng.annotations.BeforeMethod</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-e93e98516fbe218558d6e4cf41e500faL86"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="62" id="diff-e93e98516fbe218558d6e4cf41e500faR62"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">org.testng.annotations.Test</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-e93e98516fbe218558d6e4cf41e500faL87"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="63" id="diff-e93e98516fbe218558d6e4cf41e500faR63"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="64" id="diff-e93e98516fbe218558d6e4cf41e500faR64"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Field</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="65" id="diff-e93e98516fbe218558d6e4cf41e500faR65"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.lang.reflect.Method</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="66" id="diff-e93e98516fbe218558d6e4cf41e500faR66"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.net.URL</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="67" id="diff-e93e98516fbe218558d6e4cf41e500faR67"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Map</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="68" id="diff-e93e98516fbe218558d6e4cf41e500faR68"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.Set</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="69" id="diff-e93e98516fbe218558d6e4cf41e500faR69"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ConcurrentHashMap</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="70" id="diff-e93e98516fbe218558d6e4cf41e500faR70"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutorService</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="71" id="diff-e93e98516fbe218558d6e4cf41e500faR71"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.LinkedBlockingQueue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="72" id="diff-e93e98516fbe218558d6e4cf41e500faR72"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ThreadPoolExecutor</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="73" id="diff-e93e98516fbe218558d6e4cf41e500faR73"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.TimeUnit</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="74" id="diff-e93e98516fbe218558d6e4cf41e500faR74"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.atomic.AtomicReference</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="75" id="diff-e93e98516fbe218558d6e4cf41e500faR75"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import</span> <span class="pl-smi">java.util.function.Supplier</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="76" id="diff-e93e98516fbe218558d6e4cf41e500faR76"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="77" id="diff-e93e98516fbe218558d6e4cf41e500faR77"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.doAnswer</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="78" id="diff-e93e98516fbe218558d6e4cf41e500faR78"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.spy</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="79" id="diff-e93e98516fbe218558d6e4cf41e500faR79"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.verify</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="80" id="diff-e93e98516fbe218558d6e4cf41e500faR80"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.mockito.Mockito.when</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="81" id="diff-e93e98516fbe218558d6e4cf41e500faR81"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="82" id="diff-e93e98516fbe218558d6e4cf41e500faR82"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertFalse</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="83" id="diff-e93e98516fbe218558d6e4cf41e500faR83"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertNotEquals</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="84" id="diff-e93e98516fbe218558d6e4cf41e500faR84"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><span class="pl-k">import static</span> <span class="pl-smi">org.testng.Assert.assertTrue</span>;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="85" id="diff-e93e98516fbe218558d6e4cf41e500faR85"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="88" id="diff-e93e98516fbe218558d6e4cf41e500faL88"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-e93e98516fbe218558d6e4cf41e500faR86"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ModularLoadManagerImplTest</span> {</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="89" id="diff-e93e98516fbe218558d6e4cf41e500faL89"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-e93e98516fbe218558d6e4cf41e500faR87"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">LocalBookkeeperEnsemble</span> bkEnsemble;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="90" id="diff-e93e98516fbe218558d6e4cf41e500faL90"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="88" id="diff-e93e98516fbe218558d6e4cf41e500faR88"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr class="js-expandable-line" data-position="65">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="91-96" data-right-range="89-94" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;in_wiki_context=&amp;last_left=90&amp;last_right=88&amp;left=105&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=103&amp;right_hunk_size=7" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -105,7 +103,7 @@</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-e93e98516fbe218558d6e4cf41e500faL105"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-e93e98516fbe218558d6e4cf41e500faR103"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">ModularLoadManagerImpl</span> secondaryLoadManager;</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="106" id="diff-e93e98516fbe218558d6e4cf41e500faL106"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="104" id="diff-e93e98516fbe218558d6e4cf41e500faR104"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-e93e98516fbe218558d6e4cf41e500faL107"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-e93e98516fbe218558d6e4cf41e500faR105"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-smi">ExecutorService</span> executor <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ThreadPoolExecutor</span>(<span class="pl-c1">5</span>, <span class="pl-c1">20</span>, <span class="pl-c1">30</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>SECONDS</span>,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="108" id="diff-e93e98516fbe218558d6e4cf41e500faL108"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="x x-first x-last"> </span><span class="pl-k">new</span> <span class="pl-k">LinkedBlockingQueue&lt;<span class="pl-smi x x-first x-last">Runnable</span>&gt;</span>());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="106" id="diff-e93e98516fbe218558d6e4cf41e500faR106"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-k">new</span> <span class="pl-k">LinkedBlockingQueue&lt;&gt;</span>());</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="109" id="diff-e93e98516fbe218558d6e4cf41e500faL109"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-e93e98516fbe218558d6e4cf41e500faR107"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="110" id="diff-e93e98516fbe218558d6e4cf41e500faL110"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="108" id="diff-e93e98516fbe218558d6e4cf41e500faR108"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">int</span> <span class="pl-c1">ZOOKEEPER_PORT</span> <span class="pl-k">=</span> <span class="pl-smi">PortManager</span><span class="pl-k">.</span>nextFreePort();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="111" id="diff-e93e98516fbe218558d6e4cf41e500faL111"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="109" id="diff-e93e98516fbe218558d6e4cf41e500faR109"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">int</span> <span class="pl-c1">PRIMARY_BROKER_WEBSERVICE_PORT</span> <span class="pl-k">=</span> <span class="pl-smi">PortManager</span><span class="pl-k">.</span>nextFreePort();</span></td>
</tr>
<tr class="js-expandable-line" data-position="74">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="112-132" data-right-range="110-130" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=111&amp;last_right=109&amp;left=156&amp;left_hunk_size=11&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=154&amp;right_hunk_size=12" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="133-155" data-right-range="131-153" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=111&amp;last_right=109&amp;left=156&amp;left_hunk_size=11&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=154&amp;right_hunk_size=12" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -156,11 +154,12 @@ void setup() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-e93e98516fbe218558d6e4cf41e500faL156"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="154" id="diff-e93e98516fbe218558d6e4cf41e500faR154"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config1<span class="pl-k">.</span>setWebServicePort(<span class="pl-c1">PRIMARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="157" id="diff-e93e98516fbe218558d6e4cf41e500faL157"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="155" id="diff-e93e98516fbe218558d6e4cf41e500faR155"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config1<span class="pl-k">.</span>setZookeeperServers(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">ZOOKEEPER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-e93e98516fbe218558d6e4cf41e500faL158"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-e93e98516fbe218558d6e4cf41e500faR156"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config1<span class="pl-k">.</span>setBrokerServicePort(<span class="pl-c1">PRIMARY_BROKER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="157" id="diff-e93e98516fbe218558d6e4cf41e500faR157"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">        config1<span class="pl-k">.</span>setAdvertisedAddress(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-e93e98516fbe218558d6e4cf41e500faL159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-e93e98516fbe218558d6e4cf41e500faR158"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar1 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">PulsarService</span>(config1);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-e93e98516fbe218558d6e4cf41e500faL160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-e93e98516fbe218558d6e4cf41e500faR159"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-e93e98516fbe218558d6e4cf41e500faL161"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-e93e98516fbe218558d6e4cf41e500faR160"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar1<span class="pl-k">.</span>start();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-e93e98516fbe218558d6e4cf41e500faL162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-e93e98516fbe218558d6e4cf41e500faR161"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="163" id="diff-e93e98516fbe218558d6e4cf41e500faL163"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner">        primaryHost <span class="pl-k">=</span> <span class="pl-smi">String</span><span class="pl-k">.</span>format(<span class="pl-s"><span class="pl-pds">"</span>%s:%d<span class="pl-pds">"</span></span>, <span class="pl-smi x x-first">InetAddress</span><span class="pl-k x">.</span><span class="x">getLocalHost()</span><span class="pl-k x">.</span><span class="x x-last">getHostName()</span>, <span class="pl-c1">PRIMARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="162" id="diff-e93e98516fbe218558d6e4cf41e500faR162"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">        primaryHost <span class="pl-k">=</span> <span class="pl-smi">String</span><span class="pl-k">.</span>format(<span class="pl-s"><span class="pl-pds">"</span>%s:%d<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds x x-first">"</span><span class="x">localhost</span><span class="pl-pds x x-last">"</span></span>, <span class="pl-c1">PRIMARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-e93e98516fbe218558d6e4cf41e500faL164"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="163" id="diff-e93e98516fbe218558d6e4cf41e500faR163"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        url1 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">URL</span>(<span class="pl-s"><span class="pl-pds">"</span>http://127.0.0.1<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">PRIMARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="165" id="diff-e93e98516fbe218558d6e4cf41e500faL165"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-e93e98516fbe218558d6e4cf41e500faR164"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        admin1 <span class="pl-k">=</span> <span class="pl-smi">PulsarAdmin</span><span class="pl-k">.</span>builder()<span class="pl-k">.</span>serviceHttpUrl(url1<span class="pl-k">.</span>toString())<span class="pl-k">.</span>build();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="166" id="diff-e93e98516fbe218558d6e4cf41e500faL166"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="165" id="diff-e93e98516fbe218558d6e4cf41e500faR165"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr class="js-expandable-line" data-position="88">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand All" class="js-expand directional-expander single-expander" data-left-range="167-167" data-right-range="166-166" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;in_wiki_context=&amp;last_left=166&amp;last_right=165&amp;left=171&amp;left_hunk_size=8&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=170&amp;right_hunk_size=9" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand All">
<svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -171,8 +170,9 @@ void setup() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="171" id="diff-e93e98516fbe218558d6e4cf41e500faL171"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="170" id="diff-e93e98516fbe218558d6e4cf41e500faR170"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config2<span class="pl-k">.</span>setWebServicePort(<span class="pl-c1">SECONDARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="172" id="diff-e93e98516fbe218558d6e4cf41e500faL172"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="171" id="diff-e93e98516fbe218558d6e4cf41e500faR171"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config2<span class="pl-k">.</span>setZookeeperServers(<span class="pl-s"><span class="pl-pds">"</span>127.0.0.1<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-c1">ZOOKEEPER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="173" id="diff-e93e98516fbe218558d6e4cf41e500faL173"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="172" id="diff-e93e98516fbe218558d6e4cf41e500faR172"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        config2<span class="pl-k">.</span>setBrokerServicePort(<span class="pl-c1">SECONDARY_BROKER_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="173" id="diff-e93e98516fbe218558d6e4cf41e500faR173"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">        config2<span class="pl-k">.</span>setAdvertisedAddress(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="174" id="diff-e93e98516fbe218558d6e4cf41e500faL174"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="174" id="diff-e93e98516fbe218558d6e4cf41e500faR174"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar2 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">PulsarService</span>(config2);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="175" id="diff-e93e98516fbe218558d6e4cf41e500faL175"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner">        secondaryHost <span class="pl-k">=</span> <span class="pl-smi">String</span><span class="pl-k">.</span>format(<span class="pl-s"><span class="pl-pds">"</span>%s:%d<span class="pl-pds">"</span></span>, <span class="pl-smi x x-first">InetAddress</span><span class="pl-k x">.</span><span class="x">getLocalHost()</span><span class="pl-k x">.</span><span class="x x-last">getHostName()</span>,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="175" id="diff-e93e98516fbe218558d6e4cf41e500faR175"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner">        secondaryHost <span class="pl-k">=</span> <span class="pl-smi">String</span><span class="pl-k">.</span>format(<span class="pl-s"><span class="pl-pds">"</span>%s:%d<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds x x-first">"</span><span class="x">localhost</span><span class="pl-pds x x-last">"</span></span>,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="176" id="diff-e93e98516fbe218558d6e4cf41e500faL176"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="176" id="diff-e93e98516fbe218558d6e4cf41e500faR176"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-c1">SECONDARY_BROKER_WEBSERVICE_PORT</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="177" id="diff-e93e98516fbe218558d6e4cf41e500faL177"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="177" id="diff-e93e98516fbe218558d6e4cf41e500faR177"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"><br/></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="178" id="diff-e93e98516fbe218558d6e4cf41e500faL178"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="178" id="diff-e93e98516fbe218558d6e4cf41e500faR178"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar2<span class="pl-k">.</span>start();</span></td>
</tr>
<tr class="js-expandable-line" data-position="99">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="179-259" data-right-range="179-259" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=178&amp;last_right=178&amp;left=342&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=342&amp;right_hunk_size=7" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="260-341" data-right-range="260-341" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=178&amp;last_right=178&amp;left=342&amp;left_hunk_size=7&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=342&amp;right_hunk_size=7" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -342,7 +342,7 @@ public void testLoadShedding() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="342" id="diff-e93e98516fbe218558d6e4cf41e500faL342"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="342" id="diff-e93e98516fbe218558d6e4cf41e500faR342"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">final</span> <span class="pl-smi">BrokerData</span> brokerDataSpy1 <span class="pl-k">=</span> spy(brokerDataMap<span class="pl-k">.</span>get(primaryHost));</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="343" id="diff-e93e98516fbe218558d6e4cf41e500faL343"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="343" id="diff-e93e98516fbe218558d6e4cf41e500faR343"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        when(brokerDataSpy1<span class="pl-k">.</span>getLocalData())<span class="pl-k">.</span>thenReturn(localBrokerData);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="344" id="diff-e93e98516fbe218558d6e4cf41e500faL344"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="344" id="diff-e93e98516fbe218558d6e4cf41e500faR344"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        brokerDataMap<span class="pl-k">.</span>put(primaryHost, brokerDataSpy1);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="345" id="diff-e93e98516fbe218558d6e4cf41e500faL345"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> Need to update all the bundle data for the <span class="x x-first x-last">shedder</span> to see the spy.</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="345" id="diff-e93e98516fbe218558d6e4cf41e500faR345"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> Need to update all the bundle data for the <span class="x x-first x-last">shredder</span> to see the spy.</span></span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="346" id="diff-e93e98516fbe218558d6e4cf41e500faL346"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="346" id="diff-e93e98516fbe218558d6e4cf41e500faR346"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        primaryLoadManager<span class="pl-k">.</span>onUpdate(<span class="pl-c1">null</span>, <span class="pl-c1">null</span>, <span class="pl-c1">null</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="347" id="diff-e93e98516fbe218558d6e4cf41e500faL347"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="347" id="diff-e93e98516fbe218558d6e4cf41e500faR347"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">Thread</span><span class="pl-k">.</span>sleep(<span class="pl-c1">100</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="348" id="diff-e93e98516fbe218558d6e4cf41e500faL348"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="348" id="diff-e93e98516fbe218558d6e4cf41e500faR348"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        localBrokerData<span class="pl-k">.</span>setCpu(<span class="pl-k">new</span> <span class="pl-smi">ResourceUsage</span>(<span class="pl-c1">80</span>, <span class="pl-c1">100</span>));</span></td>
</tr>
<tr class="js-expandable-line" data-position="108">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander" data-left-range="349-403" data-right-range="349-403" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=348&amp;last_right=348&amp;left=461&amp;left_hunk_size=10&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=461&amp;right_hunk_size=10" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
<a aria-label="Expand Up" class="js-expand directional-expander" data-left-range="404-460" data-right-range="404-460" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=up&amp;in_wiki_context=&amp;last_left=348&amp;last_right=348&amp;left=461&amp;left_hunk_size=10&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=461&amp;right_hunk_size=10" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Up">
<svg aria-hidden="true" class="octicon octicon-fold-up" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M10 6L7 3 4 6h2v6h2V6h2zm4 0c0-.55-.45-1-1-1h-2.5l1 1h1l-2 2H9v1h1.5l2 2H9v1h4c.55 0 1-.45 1-1l-2.5-2.5L14 6zM3.5 8H5v1H3.5l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 6c0-.55.45-1 1-1h2.5l-1 1h-1l2 2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2">@@ -461,10 +461,10 @@ public void testBrokerStopCacheUpdate() throws Exception {</td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="461" id="diff-e93e98516fbe218558d6e4cf41e500faL461"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="461" id="diff-e93e98516fbe218558d6e4cf41e500faR461"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        pulsar2<span class="pl-k">.</span>getLocalZkCache()<span class="pl-k">.</span>getZooKeeper()<span class="pl-k">.</span>delete(<span class="pl-smi">LoadManager</span><span class="pl-c1"><span class="pl-k">.</span>LOADBALANCE_BROKERS_ROOT</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span> <span class="pl-k">+</span> secondaryBroker,</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="462" id="diff-e93e98516fbe218558d6e4cf41e500faL462"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="462" id="diff-e93e98516fbe218558d6e4cf41e500faR462"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">-</span><span class="pl-c1">1</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="463" id="diff-e93e98516fbe218558d6e4cf41e500faL463"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="463" id="diff-e93e98516fbe218558d6e4cf41e500faR463"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">Thread</span><span class="pl-k">.</span>sleep(<span class="pl-c1">100</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="464" id="diff-e93e98516fbe218558d6e4cf41e500faL464"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-smi">ModularLoadManagerWrapper</span> <span class="x x-first x-last">loadManagerWapper</span> <span class="pl-k">=</span> (<span class="pl-smi">ModularLoadManagerWrapper</span>) pulsar1<span class="pl-k">.</span>getLoadManager()<span class="pl-k">.</span>get();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="464" id="diff-e93e98516fbe218558d6e4cf41e500faR464"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-smi">ModularLoadManagerWrapper</span> <span class="x x-first x-last">loadManagerWrapper</span> <span class="pl-k">=</span> (<span class="pl-smi">ModularLoadManagerWrapper</span>) pulsar1<span class="pl-k">.</span>getLoadManager()<span class="pl-k">.</span>get();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="465" id="diff-e93e98516fbe218558d6e4cf41e500faL465"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="465" id="diff-e93e98516fbe218558d6e4cf41e500faR465"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-smi">Field</span> loadMgrField <span class="pl-k">=</span> <span class="pl-smi">ModularLoadManagerWrapper</span><span class="pl-k">.</span>class<span class="pl-k">.</span>getDeclaredField(<span class="pl-s"><span class="pl-pds">"</span>loadManager<span class="pl-pds">"</span></span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="466" id="diff-e93e98516fbe218558d6e4cf41e500faL466"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="466" id="diff-e93e98516fbe218558d6e4cf41e500faR466"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        loadMgrField<span class="pl-k">.</span>setAccessible(<span class="pl-c1">true</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="467" id="diff-e93e98516fbe218558d6e4cf41e500faL467"></td>
<td class="blob-num blob-num-deletion empty-cell"></td>
<td class="blob-code blob-code-deletion blob-code-marker-cell" data-code-marker="-">
</td>
<td class="blob-code blob-code-deletion">
<span class="blob-code-inner"> <span class="pl-smi">ModularLoadManagerImpl</span> loadManager <span class="pl-k">=</span> (<span class="pl-smi">ModularLoadManagerImpl</span>) loadMgrField<span class="pl-k">.</span>get(<span class="x x-first x-last">loadManagerWapper</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-addition empty-cell"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="467" id="diff-e93e98516fbe218558d6e4cf41e500faR467"></td>
<td class="blob-code blob-code-addition blob-code-marker-cell" data-code-marker="+">
</td>
<td class="blob-code blob-code-addition">
<span class="blob-code-inner"> <span class="pl-smi">ModularLoadManagerImpl</span> loadManager <span class="pl-k">=</span> (<span class="pl-smi">ModularLoadManagerImpl</span>) loadMgrField<span class="pl-k">.</span>get(<span class="x x-first x-last">loadManagerWrapper</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="468" id="diff-e93e98516fbe218558d6e4cf41e500faL468"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="468" id="diff-e93e98516fbe218558d6e4cf41e500faR468"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner"> <span class="pl-k">Set&lt;<span class="pl-smi">String</span>&gt;</span> avaialbeBrokers <span class="pl-k">=</span> loadManager<span class="pl-k">.</span>getAvailableBrokers();</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="469" id="diff-e93e98516fbe218558d6e4cf41e500faL469"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="469" id="diff-e93e98516fbe218558d6e4cf41e500faR469"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">        assertEquals(avaialbeBrokers<span class="pl-k">.</span>size(), <span class="pl-c1">1</span>);</span></td>
</tr>
<tr>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="470" id="diff-e93e98516fbe218558d6e4cf41e500faL470"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="470" id="diff-e93e98516fbe218558d6e4cf41e500faR470"></td>
<td class="blob-code blob-code-context blob-code-marker-cell" data-code-marker=" ">
</td>
<td class="blob-code blob-code-context">
<span class="blob-code-inner">    }</span></td>
</tr>
<tr class="js-expandable-line" data-position="">
<td class="blob-num blob-num-expandable" colspan="2">
<a aria-label="Expand Down" class="js-expand directional-expander single-expander" data-left-range="471-619" data-right-range="471-619" data-url="/apache/pulsar/blob_excerpt/6d25b7dfc67ec0ed36c59d4859038759f08151cb?diff=unified&amp;direction=down&amp;in_wiki_context=&amp;last_left=470&amp;last_right=470&amp;left=620&amp;left_hunk_size=&amp;mode=100644&amp;path=pulsar-broker%2Fsrc%2Ftest%2Fjava%2Forg%2Fapache%2Fpulsar%2Fbroker%2Floadbalance%2FModularLoadManagerImplTest.java&amp;right=620&amp;right_hunk_size=" href="#diff-e93e98516fbe218558d6e4cf41e500fa" title="Expand Down">
<svg aria-hidden="true" class="octicon octicon-fold-down" height="16" version="1.1" viewbox="0 0 14 16" width="14"><path d="M4 11l3 3 3-3H8V5H6v6H4zm-4 0c0 .55.45 1 1 1h2.5l-1-1h-1l2-2H5V8H3.5l-2-2H5V5H1c-.55 0-1 .45-1 1l2.5 2.5L0 11zm10.5-2H9V8h1.5l2-2H9V5h4c.55 0 1 .45 1 1l-2.5 2.5L14 11c0 .55-.45 1-1 1h-2.5l1-1h1l-2-2z" fill-rule="evenodd"></path></svg>
</a>
</td>
<td class="blob-code blob-code-inner blob-code-hunk" colspan="2"></td>
</tr>
</table>
</div>
</div>
</div>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-e93e98516fbe218558d6e4cf41e500faL18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="18" id="diff-e93e98516fbe218558d6e4cf41e500faR18"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-e93e98516fbe218558d6e4cf41e500faL19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="19" id="diff-e93e98516fbe218558d6e4cf41e500faR19"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-e93e98516fbe218558d6e4cf41e500faL20"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="20" id="diff-e93e98516fbe218558d6e4cf41e500faR20"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="21" id="diff-e93e98516fbe218558d6e4cf41e500faL21"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="22" id="diff-e93e98516fbe218558d6e4cf41e500faL22"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="23" id="diff-e93e98516fbe218558d6e4cf41e500faL23"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="24" id="diff-e93e98516fbe218558d6e4cf41e500faL24"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="25" id="diff-e93e98516fbe218558d6e4cf41e500faL25"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="26" id="diff-e93e98516fbe218558d6e4cf41e500faL26"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="27" id="diff-e93e98516fbe218558d6e4cf41e500faL27"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="28" id="diff-e93e98516fbe218558d6e4cf41e500faL28"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="29" id="diff-e93e98516fbe218558d6e4cf41e500faL29"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="30" id="diff-e93e98516fbe218558d6e4cf41e500faL30"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="21" id="diff-e93e98516fbe218558d6e4cf41e500faR21"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="31" id="diff-e93e98516fbe218558d6e4cf41e500faL31"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="22" id="diff-e93e98516fbe218558d6e4cf41e500faR22"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="32" id="diff-e93e98516fbe218558d6e4cf41e500faL32"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="23" id="diff-e93e98516fbe218558d6e4cf41e500faR23"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="33" id="diff-e93e98516fbe218558d6e4cf41e500faL33"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="24" id="diff-e93e98516fbe218558d6e4cf41e500faR24"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="34" id="diff-e93e98516fbe218558d6e4cf41e500faL34"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="25" id="diff-e93e98516fbe218558d6e4cf41e500faR25"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="35" id="diff-e93e98516fbe218558d6e4cf41e500faL35"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="36" id="diff-e93e98516fbe218558d6e4cf41e500faL36"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="37" id="diff-e93e98516fbe218558d6e4cf41e500faL37"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="38" id="diff-e93e98516fbe218558d6e4cf41e500faL38"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="39" id="diff-e93e98516fbe218558d6e4cf41e500faL39"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="40" id="diff-e93e98516fbe218558d6e4cf41e500faL40"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="41" id="diff-e93e98516fbe218558d6e4cf41e500faL41"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="42" id="diff-e93e98516fbe218558d6e4cf41e500faL42"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="43" id="diff-e93e98516fbe218558d6e4cf41e500faL43"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="44" id="diff-e93e98516fbe218558d6e4cf41e500faL44"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="45" id="diff-e93e98516fbe218558d6e4cf41e500faL45"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="46" id="diff-e93e98516fbe218558d6e4cf41e500faL46"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="47" id="diff-e93e98516fbe218558d6e4cf41e500faL47"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="48" id="diff-e93e98516fbe218558d6e4cf41e500faL48"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="49" id="diff-e93e98516fbe218558d6e4cf41e500faL49"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="50" id="diff-e93e98516fbe218558d6e4cf41e500faL50"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="26" id="diff-e93e98516fbe218558d6e4cf41e500faR26"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="51" id="diff-e93e98516fbe218558d6e4cf41e500faL51"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="27" id="diff-e93e98516fbe218558d6e4cf41e500faR27"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="52" id="diff-e93e98516fbe218558d6e4cf41e500faL52"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="28" id="diff-e93e98516fbe218558d6e4cf41e500faR28"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="85" id="diff-e93e98516fbe218558d6e4cf41e500faL85"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="61" id="diff-e93e98516fbe218558d6e4cf41e500faR61"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-e93e98516fbe218558d6e4cf41e500faL86"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="62" id="diff-e93e98516fbe218558d6e4cf41e500faR62"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-e93e98516fbe218558d6e4cf41e500faL87"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="63" id="diff-e93e98516fbe218558d6e4cf41e500faR63"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="64" id="diff-e93e98516fbe218558d6e4cf41e500faR64"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="65" id="diff-e93e98516fbe218558d6e4cf41e500faR65"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="66" id="diff-e93e98516fbe218558d6e4cf41e500faR66"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="67" id="diff-e93e98516fbe218558d6e4cf41e500faR67"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="68" id="diff-e93e98516fbe218558d6e4cf41e500faR68"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="69" id="diff-e93e98516fbe218558d6e4cf41e500faR69"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="70" id="diff-e93e98516fbe218558d6e4cf41e500faR70"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="71" id="diff-e93e98516fbe218558d6e4cf41e500faR71"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="72" id="diff-e93e98516fbe218558d6e4cf41e500faR72"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="73" id="diff-e93e98516fbe218558d6e4cf41e500faR73"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="74" id="diff-e93e98516fbe218558d6e4cf41e500faR74"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="75" id="diff-e93e98516fbe218558d6e4cf41e500faR75"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="76" id="diff-e93e98516fbe218558d6e4cf41e500faR76"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="77" id="diff-e93e98516fbe218558d6e4cf41e500faR77"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="78" id="diff-e93e98516fbe218558d6e4cf41e500faR78"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="79" id="diff-e93e98516fbe218558d6e4cf41e500faR79"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="80" id="diff-e93e98516fbe218558d6e4cf41e500faR80"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="81" id="diff-e93e98516fbe218558d6e4cf41e500faR81"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="82" id="diff-e93e98516fbe218558d6e4cf41e500faR82"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="83" id="diff-e93e98516fbe218558d6e4cf41e500faR83"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="84" id="diff-e93e98516fbe218558d6e4cf41e500faR84"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="85" id="diff-e93e98516fbe218558d6e4cf41e500faR85"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="88" id="diff-e93e98516fbe218558d6e4cf41e500faL88"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="86" id="diff-e93e98516fbe218558d6e4cf41e500faR86"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="89" id="diff-e93e98516fbe218558d6e4cf41e500faL89"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="87" id="diff-e93e98516fbe218558d6e4cf41e500faR87"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="90" id="diff-e93e98516fbe218558d6e4cf41e500faL90"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="88" id="diff-e93e98516fbe218558d6e4cf41e500faR88"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-e93e98516fbe218558d6e4cf41e500faL105"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="103" id="diff-e93e98516fbe218558d6e4cf41e500faR103"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="106" id="diff-e93e98516fbe218558d6e4cf41e500faL106"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="104" id="diff-e93e98516fbe218558d6e4cf41e500faR104"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-e93e98516fbe218558d6e4cf41e500faL107"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="105" id="diff-e93e98516fbe218558d6e4cf41e500faR105"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="108" id="diff-e93e98516fbe218558d6e4cf41e500faL108"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="106" id="diff-e93e98516fbe218558d6e4cf41e500faR106"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="109" id="diff-e93e98516fbe218558d6e4cf41e500faL109"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="107" id="diff-e93e98516fbe218558d6e4cf41e500faR107"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="110" id="diff-e93e98516fbe218558d6e4cf41e500faL110"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="108" id="diff-e93e98516fbe218558d6e4cf41e500faR108"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="111" id="diff-e93e98516fbe218558d6e4cf41e500faL111"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="109" id="diff-e93e98516fbe218558d6e4cf41e500faR109"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-e93e98516fbe218558d6e4cf41e500faL156"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="154" id="diff-e93e98516fbe218558d6e4cf41e500faR154"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="157" id="diff-e93e98516fbe218558d6e4cf41e500faL157"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="155" id="diff-e93e98516fbe218558d6e4cf41e500faR155"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-e93e98516fbe218558d6e4cf41e500faL158"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="156" id="diff-e93e98516fbe218558d6e4cf41e500faR156"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="157" id="diff-e93e98516fbe218558d6e4cf41e500faR157"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-e93e98516fbe218558d6e4cf41e500faL159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="158" id="diff-e93e98516fbe218558d6e4cf41e500faR158"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-e93e98516fbe218558d6e4cf41e500faL160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="159" id="diff-e93e98516fbe218558d6e4cf41e500faR159"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-e93e98516fbe218558d6e4cf41e500faL161"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="160" id="diff-e93e98516fbe218558d6e4cf41e500faR160"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="162" id="diff-e93e98516fbe218558d6e4cf41e500faL162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="161" id="diff-e93e98516fbe218558d6e4cf41e500faR161"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="163" id="diff-e93e98516fbe218558d6e4cf41e500faL163"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="162" id="diff-e93e98516fbe218558d6e4cf41e500faR162"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-e93e98516fbe218558d6e4cf41e500faL164"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="163" id="diff-e93e98516fbe218558d6e4cf41e500faR163"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="165" id="diff-e93e98516fbe218558d6e4cf41e500faL165"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="164" id="diff-e93e98516fbe218558d6e4cf41e500faR164"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="166" id="diff-e93e98516fbe218558d6e4cf41e500faL166"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="165" id="diff-e93e98516fbe218558d6e4cf41e500faR165"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="171" id="diff-e93e98516fbe218558d6e4cf41e500faL171"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="170" id="diff-e93e98516fbe218558d6e4cf41e500faR170"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="172" id="diff-e93e98516fbe218558d6e4cf41e500faL172"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="171" id="diff-e93e98516fbe218558d6e4cf41e500faR171"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="173" id="diff-e93e98516fbe218558d6e4cf41e500faL173"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="172" id="diff-e93e98516fbe218558d6e4cf41e500faR172"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="173" id="diff-e93e98516fbe218558d6e4cf41e500faR173"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="174" id="diff-e93e98516fbe218558d6e4cf41e500faL174"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="174" id="diff-e93e98516fbe218558d6e4cf41e500faR174"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="175" id="diff-e93e98516fbe218558d6e4cf41e500faL175"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="175" id="diff-e93e98516fbe218558d6e4cf41e500faR175"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="176" id="diff-e93e98516fbe218558d6e4cf41e500faL176"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="176" id="diff-e93e98516fbe218558d6e4cf41e500faR176"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="177" id="diff-e93e98516fbe218558d6e4cf41e500faL177"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="177" id="diff-e93e98516fbe218558d6e4cf41e500faR177"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="178" id="diff-e93e98516fbe218558d6e4cf41e500faL178"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="178" id="diff-e93e98516fbe218558d6e4cf41e500faR178"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="342" id="diff-e93e98516fbe218558d6e4cf41e500faL342"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="342" id="diff-e93e98516fbe218558d6e4cf41e500faR342"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="343" id="diff-e93e98516fbe218558d6e4cf41e500faL343"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="343" id="diff-e93e98516fbe218558d6e4cf41e500faR343"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="344" id="diff-e93e98516fbe218558d6e4cf41e500faL344"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="344" id="diff-e93e98516fbe218558d6e4cf41e500faR344"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="345" id="diff-e93e98516fbe218558d6e4cf41e500faL345"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="345" id="diff-e93e98516fbe218558d6e4cf41e500faR345"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="346" id="diff-e93e98516fbe218558d6e4cf41e500faL346"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="346" id="diff-e93e98516fbe218558d6e4cf41e500faR346"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="347" id="diff-e93e98516fbe218558d6e4cf41e500faL347"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="347" id="diff-e93e98516fbe218558d6e4cf41e500faR347"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="348" id="diff-e93e98516fbe218558d6e4cf41e500faL348"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="348" id="diff-e93e98516fbe218558d6e4cf41e500faR348"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="461" id="diff-e93e98516fbe218558d6e4cf41e500faL461"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="461" id="diff-e93e98516fbe218558d6e4cf41e500faR461"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="462" id="diff-e93e98516fbe218558d6e4cf41e500faL462"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="462" id="diff-e93e98516fbe218558d6e4cf41e500faR462"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="463" id="diff-e93e98516fbe218558d6e4cf41e500faL463"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="463" id="diff-e93e98516fbe218558d6e4cf41e500faR463"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="464" id="diff-e93e98516fbe218558d6e4cf41e500faL464"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="464" id="diff-e93e98516fbe218558d6e4cf41e500faR464"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="465" id="diff-e93e98516fbe218558d6e4cf41e500faL465"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="465" id="diff-e93e98516fbe218558d6e4cf41e500faR465"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="466" id="diff-e93e98516fbe218558d6e4cf41e500faL466"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="466" id="diff-e93e98516fbe218558d6e4cf41e500faR466"></td>
<td class="blob-num blob-num-deletion js-linkable-line-number" data-line-number="467" id="diff-e93e98516fbe218558d6e4cf41e500faL467"></td>
<td class="blob-num blob-num-addition js-linkable-line-number" data-line-number="467" id="diff-e93e98516fbe218558d6e4cf41e500faR467"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="468" id="diff-e93e98516fbe218558d6e4cf41e500faL468"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="468" id="diff-e93e98516fbe218558d6e4cf41e500faR468"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="469" id="diff-e93e98516fbe218558d6e4cf41e500faL469"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="469" id="diff-e93e98516fbe218558d6e4cf41e500faR469"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="470" id="diff-e93e98516fbe218558d6e4cf41e500faL470"></td>
<td class="blob-num blob-num-context js-linkable-line-number" data-line-number="470" id="diff-e93e98516fbe218558d6e4cf41e500faR470"></td>
<clippath id="diff-placeholder">
<rect height="11.9298746" rx="2" width="67.0175439" x="0" y="0"></rect>
<rect height="11.9298746" rx="2" width="100.701754" x="18.9473684" y="47.7194983"></rect>
<rect height="11.9298746" rx="2" width="37.8947368" x="0" y="71.930126"></rect>
<rect height="11.9298746" rx="2" width="53.3333333" x="127.017544" y="48.0703769"></rect>
<rect height="11.9298746" rx="2" width="72.9824561" x="187.719298" y="48.0703769"></rect>
<rect height="11.9298746" rx="2" width="140.350877" x="76.8421053" y="0"></rect>
<rect height="11.9298746" rx="2" width="140.350877" x="17.8947368" y="23.8597491"></rect>
<rect height="11.9298746" rx="2" width="173.684211" x="166.315789" y="23.8597491"></rect>
</clippath>
<lineargradient id="animated-diff-gradient" spreadmethod="reflect" x1="0" x2="0" y1="0" y2="1">
<stop offset="0" stop-color="#eee"></stop>
<stop offset="0.2" stop-color="#eee"></stop>
<stop offset="0.5" stop-color="#ddd"></stop>
<stop offset="0.8" stop-color="#eee"></stop>
<stop offset="1" stop-color="#eee"></stop>
<animatetransform attributename="y1" dur="1s" repeatcount="3" values="0%; 100%; 0"></animatetransform>
<animatetransform attributename="y2" dur="1s" repeatcount="3" values="100%; 200%; 0"></animatetransform>
</lineargradient>
